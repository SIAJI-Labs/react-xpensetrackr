import{r as n,j as e,e as m}from"./app-49e19f09.js";import{u as _e,C as I}from"./index-961138f1.js";import{D as Fe,e as Je,a as Ue,b as Pe,c as Ve,f as Be,d as He}from"./dialog-dd6b0ada.js";import{B as t}from"./button-8f2a595a.js";import{P as L,a as k,b as $,C as R,c as E,S as D,d as A,e as q,f as O}from"./scroll-area-8438057d.js";import{u as Ge,R as Me,D as Qe,e as ze,a as Ke,b as Xe,c as Ye,d as Ze,f as ea}from"./drawer-134f179f.js";/* empty css            */import"./index-61f18b0c.js";function da({openState:H,setOpenState:W,filterStatus:_,setFilterStatus:F,filterFromWallet:d=[],setFilterFromWallet:b,filterToWallet:x=[],setFilterToWallet:f,filterCategory:i=[],setFilterCategory:j,filterTags:u=[],setFilterTags:g}){const G=Ge("(min-width: 768px)");let M;const[p,ne]=n.useState(!1),[ce,te]=n.useState([]),[de,xe]=n.useState([]),[J,Q]=n.useState(""),[ie,z]=n.useState(!1),[w,ue]=n.useState(null),me=async(a,s)=>{z(!0);try{const l=[],o={keyword:a};for(const r in o)l.push(encodeURIComponent(r)+"="+encodeURIComponent(o[r]));try{return(await m.get(`${route("api.wallet.v1.list")}?${l.join("&")}`,{cancelToken:new m.CancelToken(function(h){s.abort=h})})).data.result.data}catch(r){m.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}}catch(l){throw console.error("Request error:",l),l}return[]};n.useEffect(()=>{if(clearTimeout(M),p){w&&w.abort();const a=new AbortController;return ue(a),M=setTimeout(()=>{me(J,a).then((s=[])=>{z(!1),s&&xe(s)}).catch(s=>{})},500),()=>{w&&w.abort()}}},[J,p]),n.useEffect(()=>{Q("")},[p]);let K;const[C,he]=n.useState(!1),[be,fe]=n.useState([]),[je,ge]=n.useState([]),[U,X]=n.useState(""),[pe,Y]=n.useState(!1),[N,we]=n.useState(null),Ce=async(a,s)=>{Y(!0);try{const l=[],o={keyword:a};for(const r in o)l.push(encodeURIComponent(r)+"="+encodeURIComponent(o[r]));try{return(await m.get(`${route("api.wallet.v1.list")}?${l.join("&")}`,{cancelToken:new m.CancelToken(function(h){s.abort=h})})).data.result.data}catch(r){m.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}}catch(l){throw console.error("Request error:",l),l}return[]};n.useEffect(()=>{if(clearTimeout(K),C){N&&N.abort();const a=new AbortController;return we(a),K=setTimeout(()=>{Ce(U,a).then((s=[])=>{Y(!1),s&&ge(s)}).catch(s=>{})},500),()=>{N&&N.abort()}}},[U,C]),n.useEffect(()=>{X("")},[C]);let Z;const[y,Ne]=n.useState(!1),[ye,ve]=n.useState([]),[Se,Te]=n.useState([]),[P,ee]=n.useState(""),[Ie,ae]=n.useState(!1),[v,Le]=n.useState(null),ke=async(a,s)=>{ae(!0);try{const l=[],o={keyword:a};for(const r in o)l.push(encodeURIComponent(r)+"="+encodeURIComponent(o[r]));try{return(await m.get(`${route("api.category.v1.list")}?${l.join("&")}`,{cancelToken:new m.CancelToken(function(h){s.abort=h})})).data.result.data}catch(r){m.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}}catch(l){throw console.error("Request error:",l),l}return[]};n.useEffect(()=>{if(clearTimeout(Z),y){v&&v.abort();const a=new AbortController;return Le(a),Z=setTimeout(()=>{ke(P,a).then((s=[])=>{ae(!1),s&&Te(s)}).catch(s=>{})},500),()=>{v&&v.abort()}}},[P,y]),n.useEffect(()=>{ee("")},[y]);let se;const[S,$e]=n.useState(!1),[Re,Ee]=n.useState([]),[De,Ae]=n.useState([]),[V,re]=n.useState(""),[qe,le]=n.useState(!1),[T,Oe]=n.useState(null),We=async(a,s)=>{le(!0);try{const l=[],o={keyword:a};for(const r in o)l.push(encodeURIComponent(r)+"="+encodeURIComponent(o[r]));try{return(await m.get(`${route("api.tags.v1.list")}?${l.join("&")}`,{cancelToken:new m.CancelToken(function(h){s.abort=h})})).data.result.data}catch(r){m.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}}catch(l){throw console.error("Request error:",l),l}return[]};n.useEffect(()=>{if(clearTimeout(se),S){T&&T.abort();const a=new AbortController;return Oe(a),se=setTimeout(()=>{We(V,a).then((s=[])=>{le(!1),s&&Ae(s)}).catch(s=>{})},500),()=>{T&&T.abort()}}},[V,S]),n.useEffect(()=>{re("")},[S]);const oe=e.jsx(e.Fragment,{children:e.jsx(Me,{className:`overflow-auto ${G?"max-h-screen max-lg:max-h-[50vh] lg:max-h-[65vh] border-b border-t":" border-t"}`,children:e.jsx("div",{className:" overflow-hidden p-6",children:e.jsxs("div",{className:" flex flex-col gap-6",children:[e.jsx("div",{className:" flex flex-row gap-1 w-full border p-1 rounded-md",children:(()=>{let a=[];return["complete","pending"].map((s,l)=>{a.push(e.jsx("div",{className:` w-full text-center py-1 rounded-sm cursor-pointer ${_===s?"bg-primary ":" dark:!text-white !text-black hover:!text-primary-foreground"} text-primary-foreground hover:bg-primary/90 transition`,onClick:()=>{F(s)},children:e.jsx("span",{className:" text-sm font-semibold",children:_e(s)})},`record_type-${s}`))}),a.length>0?a:e.jsx(e.Fragment,{})})()}),e.jsxs("div",{className:"",children:[e.jsxs("div",{className:" form--group",id:"record_filter-from_wallet",children:[e.jsx("label",{className:" form--label",children:"From Wallet"}),e.jsx("div",{children:e.jsxs("div",{className:" flex flex-row gap-2 flex-wrap",children:[e.jsxs(L,{open:p,onOpenChange:ne,children:[e.jsx(k,{asChild:!0,children:e.jsxs(t,{variant:"outline",role:"combobox",className:" flex flex-row gap-1 leading-none p-2 h-auto text-xs",children:[e.jsx("i",{className:"fa-solid fa-plus"}),e.jsx("span",{children:"From Wallet"})]})}),e.jsx($,{className:" w-[300px] lg:w-[400px] p-0",align:"start",children:e.jsxs(R,{shouldFilter:!1,children:[e.jsx(E,{placeholder:"Search wallet",className:" border-none focus:ring-0",value:J,onValueChange:Q}),e.jsx(D,{className:"p-0",children:e.jsxs("div",{className:"max-h-[10rem]",children:[e.jsx(A,{children:ie?"Loading...":"No wallet found."}),e.jsx(q,{children:de.map(a=>e.jsxs(O,{value:a==null?void 0:a.uuid,onSelect:s=>{let l={uuid:s,label:a.name},o=d.findIndex(r=>r.uuid===a.uuid);if(d&&o!==-1){const r=[...d];r.splice(o,1),b(r)}else b([...d,l]),te([...ce,a==null?void 0:a.name])},children:[e.jsx(I,{className:`mr-2 h-4 w-4 ${d&&d.some(s=>"uuid"in s&&s.uuid===(a==null?void 0:a.uuid))?"opacity-100":"opacity-0"}`}),e.jsx("span",{className:" w-full overflow-hidden whitespace-nowrap text-ellipsis",children:`${a==null?void 0:a.name}`})]},a==null?void 0:a.uuid))})]})})]})})]}),(()=>{let a=[];return d.length>0&&(d.forEach((s,l)=>{let o=s.label;o&&a.push(e.jsxs(t,{variant:"secondary",className:" flex flex-row gap-2 items-center text-xs leading-none p-2 h-auto",onClick:()=>{let r=d.findIndex(c=>c.uuid===s.uuid);if(r!==-1){const c=[...d];c.splice(r,1),b(c)}},children:[e.jsx("span",{children:o}),e.jsx("i",{className:"fa-solid fa-xmark"})]},`selected_fromWallet-${s}`))}),a.length>0)?a:e.jsx(e.Fragment,{})})()]})})]}),e.jsxs("div",{className:" form--group",id:"record_filter-to_wallet",children:[e.jsx("label",{className:" form--label",children:"To Wallet"}),e.jsx("div",{children:e.jsxs("div",{className:" flex flex-row gap-2 flex-wrap",children:[e.jsxs(L,{open:C,onOpenChange:he,children:[e.jsx(k,{asChild:!0,children:e.jsxs(t,{variant:"outline",role:"combobox",className:" flex flex-row gap-1 leading-none p-2 h-auto text-xs",children:[e.jsx("i",{className:"fa-solid fa-plus"}),e.jsx("span",{children:"To Wallet"})]})}),e.jsx($,{className:" w-[300px] lg:w-[400px] p-0",align:"start",children:e.jsxs(R,{shouldFilter:!1,children:[e.jsx(E,{placeholder:"Search wallet",className:" border-none focus:ring-0",value:U,onValueChange:X}),e.jsx(D,{className:"p-0",children:e.jsxs("div",{className:"max-h-[10rem]",children:[e.jsx(A,{children:pe?"Loading...":"No wallet found."}),e.jsx(q,{children:je.map(a=>e.jsxs(O,{value:a==null?void 0:a.uuid,onSelect:s=>{let l={uuid:s,label:a.name},o=x.findIndex(r=>r.uuid===a.uuid);if(x&&o!==-1){const r=[...x];r.splice(o,1),f(r)}else f([...x,l]),fe([...be,a==null?void 0:a.name])},children:[e.jsx(I,{className:`mr-2 h-4 w-4 ${x&&x.some(s=>"uuid"in s&&s.uuid===(a==null?void 0:a.uuid))?"opacity-100":"opacity-0"}`}),e.jsx("span",{className:" w-full overflow-hidden whitespace-nowrap text-ellipsis",children:`${a==null?void 0:a.name}`})]},a==null?void 0:a.uuid))})]})})]})})]}),(()=>{let a=[];return x.length>0&&(x.forEach((s,l)=>{let o=s.label;o&&a.push(e.jsxs(t,{variant:"secondary",className:" flex flex-row gap-2 items-center text-xs leading-none p-2 h-auto",onClick:()=>{let r=x.findIndex(c=>c.uuid===s.uuid);if(r!==-1){const c=[...x];c.splice(r,1),f(c)}},children:[e.jsx("span",{children:o}),e.jsx("i",{className:"fa-solid fa-xmark"})]},`selected_toWallet-${s}`))}),a.length>0)?a:e.jsx(e.Fragment,{})})()]})})]}),e.jsxs("div",{className:" form--group",id:"record_filter-category",children:[e.jsx("label",{className:" form--label",children:"Category"}),e.jsx("div",{children:e.jsxs("div",{className:" flex flex-row gap-2 flex-wrap",children:[e.jsxs(L,{open:y,onOpenChange:Ne,children:[e.jsx(k,{asChild:!0,children:e.jsxs(t,{variant:"outline",role:"combobox",className:" flex flex-row gap-1 leading-none p-2 h-auto text-xs",children:[e.jsx("i",{className:"fa-solid fa-plus"}),e.jsx("span",{children:"Category"})]})}),e.jsx($,{className:" w-[300px] lg:w-[400px] p-0",align:"start",children:e.jsxs(R,{shouldFilter:!1,children:[e.jsx(E,{placeholder:"Search category",className:" border-none focus:ring-0",value:P,onValueChange:ee}),e.jsx(D,{className:"p-0",children:e.jsxs("div",{className:"max-h-[10rem]",children:[e.jsx(A,{children:Ie?"Loading...":"No category found."}),e.jsx(q,{children:Se.map(a=>e.jsxs(O,{value:a==null?void 0:a.uuid,onSelect:s=>{let l={uuid:s,label:a.name},o=i.findIndex(r=>r.uuid===a.uuid);if(i&&o!==-1){const r=[...i];r.splice(o,1),j(r)}else j([...i,l]),ve([...ye,a==null?void 0:a.name])},children:[e.jsx(I,{className:`mr-2 h-4 w-4 ${i&&i.some(s=>"uuid"in s&&s.uuid===(a==null?void 0:a.uuid))?"opacity-100":"opacity-0"}`}),e.jsx("span",{className:" w-full overflow-hidden whitespace-nowrap text-ellipsis",children:`${a==null?void 0:a.name}`})]},a==null?void 0:a.uuid))})]})})]})})]}),(()=>{let a=[];return i.length>0&&(i.forEach((s,l)=>{let o=s.label;o&&a.push(e.jsxs(t,{variant:"secondary",className:" flex flex-row gap-2 items-center text-xs leading-none p-2 h-auto",onClick:()=>{let r=i.findIndex(c=>c.uuid===s.uuid);if(r!==-1){const c=[...i];c.splice(r,1),j(c)}},children:[e.jsx("span",{children:o}),e.jsx("i",{className:"fa-solid fa-xmark"})]},`selected_category-${s}`))}),a.length>0)?a:e.jsx(e.Fragment,{})})()]})})]}),e.jsxs("div",{className:" form--group !mb-0",id:"record_filter-tags",children:[e.jsx("label",{className:" form--label",children:"Tags"}),e.jsx("div",{children:e.jsxs("div",{className:" flex flex-row gap-2 flex-wrap",children:[e.jsxs(L,{open:S,onOpenChange:$e,children:[e.jsx(k,{asChild:!0,children:e.jsxs(t,{variant:"outline",role:"combobox",className:" flex flex-row gap-1 leading-none p-2 h-auto text-xs",children:[e.jsx("i",{className:"fa-solid fa-plus"}),e.jsx("span",{children:"Tags"})]})}),e.jsx($,{className:" w-[300px] lg:w-[400px] p-0",align:"start",children:e.jsxs(R,{shouldFilter:!1,children:[e.jsx(E,{placeholder:"Search tags",className:" border-none focus:ring-0",value:V,onValueChange:re}),e.jsx(D,{className:"p-0",children:e.jsxs("div",{className:"max-h-[10rem]",children:[e.jsx(A,{children:qe?"Loading...":"No tags found."}),e.jsx(q,{children:De.map(a=>e.jsxs(O,{value:a==null?void 0:a.uuid,onSelect:s=>{let l={uuid:s,label:a.name},o=u.findIndex(r=>r.uuid===a.uuid);if(u&&o!==-1){const r=[...u];r.splice(o,1),g(r)}else g([...u,l]),Ee([...Re,a==null?void 0:a.name])},children:[e.jsx(I,{className:`mr-2 h-4 w-4 ${u&&u.some(s=>"uuid"in s&&s.uuid===(a==null?void 0:a.uuid))?"opacity-100":"opacity-0"}`}),e.jsx("span",{className:" w-full overflow-hidden whitespace-nowrap text-ellipsis",children:`${a==null?void 0:a.name}`})]},a==null?void 0:a.uuid))})]})})]})})]}),(()=>{let a=[];return u.length>0&&(u.forEach((s,l)=>{let o=s.label;o&&a.push(e.jsxs(t,{variant:"secondary",className:" flex flex-row gap-2 items-center text-xs leading-none p-2 h-auto",onClick:()=>{let r=u.findIndex(c=>c.uuid===s.uuid);if(r!==-1){const c=[...u];c.splice(r,1),g(c)}},children:[e.jsx("span",{children:o}),e.jsx("i",{className:"fa-solid fa-xmark"})]},`selected_tags-${s}`))}),a.length>0)?a:e.jsx(e.Fragment,{})})()]})})]})]})]})})})});return G?e.jsxs(Fe,{open:H,onOpenChange:W,children:[e.jsx(Je,{asChild:!0,children:e.jsx(t,{variant:_==="pending"||i.length>0||d.length>0||x.length>0||u.length>0?"default":"outline",className:" w-10 aspect-square",children:e.jsx("i",{className:"fa-solid fa-filter"})})}),e.jsxs(Ue,{className:" flex flex-col h-auto lg:min-w-[60vw] max-lg:bottom-0 max-lg:top-[unset] max-lg:translate-y-0 p-0","data-type":"record_filter-dialog",children:[e.jsxs(Pe,{className:" p-6 pb-0",children:[e.jsx(Ve,{children:"Record: Filter"}),e.jsx(Be,{children:e.jsx("span",{children:"Show record data based on certain condition"})})]}),oe,e.jsxs(He,{className:" p-6 pt-0",children:[e.jsx(t,{variant:"outline",onClick:()=>{F("complete"),b([]),f([]),j([]),g([])},children:"Reset"}),e.jsx(t,{variant:"secondary",onClick:()=>{W(!1)},children:"Close"})]})]})]}):e.jsx("section",{id:"record-dialogSection",children:e.jsxs(Qe,{open:H,onOpenChange:W,closeThreshold:.3,children:[e.jsx(ze,{asChild:!0,children:e.jsx(t,{variant:_==="pending"||i.length>0||d.length>0||x.length>0||u.length>0?"default":"outline",className:" w-10 aspect-square",children:e.jsx("i",{className:"fa-solid fa-filter"})})}),e.jsxs(Ke,{className:" max-h-dvh",children:[e.jsx(Xe,{className:"text-left",children:e.jsx(Ye,{className:" text-center",children:"Filter"})}),oe,e.jsxs(Ze,{className:" border-t",children:[e.jsx(t,{variant:"outline",onClick:()=>{F("complete"),b([]),f([]),j([]),g([])},children:"Reset"}),e.jsx(ea,{asChild:!0,children:e.jsx(t,{variant:"ghost",children:e.jsx("span",{children:"Close"})})})]})]})]})})}export{da as default};
