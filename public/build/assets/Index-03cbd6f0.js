import{r as s,e as i,j as e,a as $,d as A}from"./app-1a8d94ac.js";import{S as _}from"./SystemLayout-c7d5caa1.js";import{u as q,B as x}from"./button-d84ab7c1.js";import{S as B,T as P}from"./SkeletonList-4111c5c1.js";import{T as H}from"./TemplateNoData-e2e2530f.js";import{C,b,c as v,d as N,a as y,e as U}from"./card-c62c794f.js";import{B as M}from"./badge-401e25d0.js";/* empty css            */import"./function-40c9a912.js";import"./ApplicationLogo-b9ae9a1d.js";import"./theme-toggle-f708ef3a.js";import"./input-e2d0098b.js";import"./ApplicationLogoMask-5779e2f4.js";import"./skeleton-a048e1d2.js";function ne({auth:f,inspire:R=""}){const h=q(),[a,p]=s.useState("complete"),[c,d]=s.useState(!0),[S,w]=s.useState(5),[l,L]=s.useState([]),[m,j]=s.useState(null),[g,k]=s.useState(0);let E=e.jsx(B,{});const T=t=>e.jsx(P,{record:t}),I=async()=>{m instanceof AbortController&&m.abort();const t=new AbortController;j(t),d(!0);const r=[],o={limit:10,filter_status:a};for(const n in o)r.push(encodeURIComponent(n)+"="+encodeURIComponent(o[n]));try{let F=(await i.get(`${route("api.record.v1.list")}?${r.join("&")}`,{cancelToken:new i.CancelToken(function(D){t.abort=D})})).data;L(F.result.data),d(!1),j(null)}catch(n){i.isCancel(n)?console.log("Request was canceled",n):console.error("Error:",n)}};s.useEffect(()=>{w(l.length>0?l.length:3)},[l]),s.useEffect(()=>{h||u()},[a]);const u=async()=>{var t;try{let o=(await i.get(route("api.record.v1.count-pending"))).data;k((t=o==null?void 0:o.result)==null?void 0:t.data),I()}catch(r){i.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}};return s.useEffect(()=>{u()},[]),s.useEffect(()=>{if(!h){const t=r=>{setTimeout(()=>{u()},100)};return document.addEventListener("dialog.record.hidden",t),document.addEventListener("record.deleted-action",t),()=>{document.removeEventListener("dialog.record.hidden",t),document.removeEventListener("record.deleted-action",t)}}}),e.jsxs(_,{user:f.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e.jsx($,{title:"Dashboard"}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(C,{className:"",children:[e.jsx(b,{className:"",children:e.jsxs("div",{className:"flex flex-col space-y-2 ",children:[e.jsxs(v,{children:[e.jsx("span",{className:" font-light",children:"Hi"})," ",e.jsx("span",{className:" font-semibold",children:f.user.name}),","]}),e.jsx(N,{children:"how's doing? ðŸ‘‹"})]})}),e.jsx(y,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:R},className:" p-4 rounded-lg bg-gray-100 dark:bg-background dark:border"})})]}),e.jsxs(C,{className:" w-full",children:[e.jsx(b,{children:e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(v,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(N,{children:"See your latest transaction"})]}),e.jsx(x,{variant:"outline",className:" w-10 aspect-square",onClick:t=>{m instanceof AbortController&&m.abort(),u()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})})]})}),e.jsxs(y,{className:" flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-4",id:"dashboard-recordList",children:[e.jsx(x,{variant:a==="complete"?"default":"outline",onClick:()=>{a!=="complete"&&(p("complete"),d(!c))},className:" ",children:"Complete"}),e.jsxs(x,{variant:a==="pending"?"default":"outline",onClick:()=>{a!=="pending"&&(p("pending"),d(!c))},className:" flex flex-row gap-1 ",children:[e.jsx("span",{children:"Pending"}),(()=>g>0?e.jsx(e.Fragment,{children:e.jsx(M,{className:`${a==="pending"?" bg-white text-primary":null} leading-none p-0 h-4 w-4 flex items-center justify-center`,children:g})}):e.jsx(e.Fragment,{}))()]})]}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(c){let t=[];for(let r=0;r<S;r++)t.push(e.jsx("div",{children:E},`skeleton-${r}`));return t}else{let t=[],r=e.jsx(H,{});return l.length>0&&l.map((o,n)=>{t.push(e.jsx("div",{children:T(o)},`record_item-${n}`))}),t.length>0?t:r}})()})]}),(()=>c?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(U,{children:e.jsx(A,{href:route("sys.record.index"),children:e.jsx(x,{variant:"outline",className:"","data-type":"load_all-record",children:"Load all"})})})}))()]})]})]})}export{ne as default};
