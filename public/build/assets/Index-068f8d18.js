import{r as t,e as f,j as e,a as F}from"./app-849ecda5.js";import{S as D}from"./SystemLayout-1cbabc89.js";import{R as A}from"./RecordTemplate-9cab257d.js";import{S as o}from"./skeleton-b2a16ae4.js";import{C as P,b as _,c as $,d as q,a as B,e as K}from"./card-83e59458.js";import{B as x}from"./button-e69f2edf.js";import{N as U}from"./NoDataTemplate-9f04b267.js";import{I as H}from"./input-9f9a580a.js";import"./function-a52eedaa.js";import"./ApplicationLogo-e9a791a0.js";import"./ApplicationLogoMask-167085eb.js";import"./dropdown-menu-6bc8b0ea.js";import"./Combination-561de21f.js";import"./textarea-331606a5.js";import"./badge-b45d9eea.js";function ne({auth:w}){const[O,v]=t.useState(!1),C=s=>e.jsx(A,{record:s});let R=e.jsx(e.Fragment,{children:e.jsxs("div",{className:" flex flex-col gap-2 border rounded p-4",children:[e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsx(o,{className:"w-[100px] h-[20px] rounded-full"}),e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(o,{className:"w-[75px] h-[20px] rounded-full"}),e.jsx(o,{className:"w-[10px] h-[20px] rounded-full"})]})]}),e.jsxs("div",{className:" flex flex-row gap-4 items-center",children:[e.jsx("div",{className:"",children:e.jsx(o,{className:"w-[50px] h-[50px] rounded-full"})}),e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx(o,{className:"w-[150px] h-[15px] rounded-full"}),e.jsx(o,{className:"w-[75px] h-[10px] rounded-full"})]})]}),e.jsxs("div",{className:" flex flex-row gap-4",children:[e.jsx(o,{className:"w-[50px] h-[20px] rounded-full"}),e.jsx(o,{className:"w-[50px] h-[20px] rounded-full"}),e.jsx(o,{className:"w-[50px] h-[20px] rounded-full"})]})]})});const[n,b]=t.useState(""),[S,z]=t.useState("complete");t.useEffect(()=>{if(n){const s=setTimeout(()=>{console.log("Filter"),p(m),i()},500);return()=>{clearTimeout(s)}}},[n]);let m=1;const[u,p]=t.useState(m),[y,h]=t.useState(!1);t.useEffect(()=>{i()},[u]);const[E,j]=t.useState(!0),[k,I]=t.useState(5),[a,L]=t.useState([]),[c,g]=t.useState(null);t.useEffect(()=>{I(a.length>0?a.length:3)},[a]);const i=async()=>{c instanceof AbortController&&c.abort();const s=new AbortController;g(s),j(!0);const l=[],d={limit:u,filter_status:S,keyword:n};for(const r in d)l.push(encodeURIComponent(r)+"="+encodeURIComponent(d[r]));try{let N=(await f.get(`${route("api.record.v1.list")}?${l.join("&")}`,{cancelToken:new f.CancelToken(function(T){s.abort=T})})).data;L(N.result.data),h(N.result.has_more),j(!1),g(null)}catch(r){f.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}};return t.useEffect(()=>{const s=()=>{setTimeout(()=>{console.log("Dialog Event"),i(),v(!1)},100)};return window.addEventListener("dialogRecord",s),()=>{window.removeEventListener("dialogRecord",s)}}),e.jsx(e.Fragment,{children:e.jsxs(D,{user:w.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Record List"}),children:[e.jsx(F,{title:"Record List"}),e.jsx("div",{className:"flex flex-col gap-6",children:e.jsxs(P,{className:"",children:[e.jsx(_,{children:e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsx($,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(q,{children:"See your latest transaction"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(()=>e.jsx(x,{variant:"outline",onClick:()=>{c instanceof AbortController&&c.abort(),console.log("Reload"),i()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}))(),e.jsx(x,{variant:"outline",onClick:()=>{document.dispatchEvent(new CustomEvent("recordDialogEditAction",{bubbles:!0}))},disabled:!0,children:e.jsx("i",{className:"fa-solid fa-plus"})})]})]})}),e.jsxs(B,{className:" flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-4",children:[e.jsx(H,{placeholder:"Search by record notes",value:n,onChange:s=>{b(s.target.value)}}),e.jsx(x,{children:e.jsx("i",{className:"fa-solid fa-filter"})})]}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(E){let s=[];for(let l=0;l<k;l++)s.push(e.jsx("div",{children:R},`skeleton-${l}`));return s}else{let s=[],l=e.jsx(U,{});return a.length>0&&a.map((d,r)=>{s.push(e.jsx("div",{children:C(d)},`record_item-${r}`))}),s.length>0?s:l}})()})]}),e.jsx(K,{children:e.jsx(x,{variant:"outline",className:"",disabled:!y,onClick:()=>{h(!1),p(u+m)},children:"Load more"})})]})})]})})}export{ne as default};
