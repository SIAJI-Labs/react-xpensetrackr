import{r as s,e as i,j as e,a as $,d as A}from"./app-15d6eef8.js";import{S as _}from"./SystemLayout-1707df4a.js";import{u as q,B as x}from"./button-6f99a713.js";import{S as B,T as P}from"./SkeletonList-87b5e031.js";import{T as H}from"./TemplateNoData-4164334c.js";import{C,b,c as v,d as N,a as y,e as U}from"./card-152587d3.js";import{B as M}from"./badge-d8b0a766.js";/* empty css            */import"./check-a00ba1aa.js";import"./index-65a2aaa0.js";import"./ApplicationLogo-b8c0335a.js";/* empty css              */import"./scroll-area-3f8e62c7.js";import"./theme-toggle-cabc636b.js";import"./input-d741e316.js";import"./ApplicationLogoMask-68b2ea93.js";import"./skeleton-a1c35785.js";function le({auth:f,inspire:R=""}){const p=q(),[a,h]=s.useState("complete"),[c,d]=s.useState(!0),[S,w]=s.useState(5),[l,L]=s.useState([]),[m,j]=s.useState(null),[g,k]=s.useState(0);let E=e.jsx(B,{});const T=t=>e.jsx(P,{record:t}),I=async()=>{m instanceof AbortController&&m.abort();const t=new AbortController;j(t),d(!0);const r=[],n={limit:10,filter_status:a};for(const o in n)r.push(encodeURIComponent(o)+"="+encodeURIComponent(n[o]));try{let F=(await i.get(`${route("api.record.v1.list")}?${r.join("&")}`,{cancelToken:new i.CancelToken(function(D){t.abort=D})})).data;L(F.result.data),d(!1),j(null)}catch(o){i.isCancel(o)?console.log("Request was canceled",o):console.error("Error:",o)}};s.useEffect(()=>{w(l.length>0?l.length:3)},[l]),s.useEffect(()=>{p||u()},[a]);const u=async()=>{var t;try{let n=(await i.get(route("api.record.v1.count-pending"))).data;k((t=n==null?void 0:n.result)==null?void 0:t.data),I()}catch(r){i.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}};return s.useEffect(()=>{u()},[]),s.useEffect(()=>{if(!p){const t=r=>{setTimeout(()=>{u()},100)};return document.addEventListener("dialog.record.hidden",t),document.addEventListener("record.deleted-action",t),()=>{document.removeEventListener("dialog.record.hidden",t),document.removeEventListener("record.deleted-action",t)}}}),e.jsxs(_,{user:f.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e.jsx($,{title:"Dashboard"}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(C,{className:"",children:[e.jsx(b,{className:"",children:e.jsxs("div",{className:"flex flex-col space-y-2 ",children:[e.jsxs(v,{children:[e.jsx("span",{className:" font-light",children:"Hi"})," ",e.jsx("span",{className:" font-semibold",children:f.user.name}),","]}),e.jsx(N,{children:"how's doing? ðŸ‘‹"})]})}),e.jsx(y,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:R},className:" p-4 rounded-lg bg-gray-100 dark:bg-background dark:border"})})]}),e.jsxs(C,{className:" w-full",children:[e.jsx(b,{children:e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(v,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(N,{children:"See your latest transaction"})]}),e.jsx(x,{variant:"outline",className:" w-10 aspect-square",onClick:t=>{m instanceof AbortController&&m.abort(),u()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})})]})}),e.jsxs(y,{className:" flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-4",id:"dashboard-recordList",children:[e.jsx(x,{variant:a==="complete"?"default":"outline",onClick:()=>{a!=="complete"&&(h("complete"),d(!c))},className:" ",children:"Complete"}),e.jsxs(x,{variant:a==="pending"?"default":"outline",onClick:()=>{a!=="pending"&&(h("pending"),d(!c))},className:" flex flex-row gap-1 ",children:[e.jsx("span",{children:"Pending"}),(()=>g>0?e.jsx(e.Fragment,{children:e.jsx(M,{className:`${a==="pending"?" bg-white text-primary":null} leading-none p-0 h-4 w-4 flex items-center justify-center`,children:g})}):e.jsx(e.Fragment,{}))()]})]}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(c){let t=[];for(let r=0;r<S;r++)t.push(e.jsx("div",{children:E},`skeleton-${r}`));return t}else{let t=[],r=e.jsx(H,{});return l.length>0&&l.map((n,o)=>{t.push(e.jsx("div",{children:T(n)},`record_item-${o}`))}),t.length>0?t:r}})()})]}),(()=>c?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(U,{children:e.jsx(A,{href:route("sys.record.index"),children:e.jsx(x,{variant:"outline",className:"","data-type":"load_all-record",children:"Load all"})})})}))()]})]})]})}export{le as default};
