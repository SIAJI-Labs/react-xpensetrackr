import{r,e as f,j as e,a as O}from"./app-dede7cfd.js";import{u as B,B as d}from"./button-fd7c0906.js";import{T as H,S as K}from"./SkeletonList-cf2cebb8.js";import{T as U}from"./TemplateNoData-a84084af.js";import{S as z}from"./SystemLayout-2689f417.js";import{C as G,b as J,c as M,d as Q,a as V,e as W}from"./card-e1c4d71b.js";import{I as X}from"./input-bef20f18.js";import{D as Y,i as Z,j as ee,k as te,l as re,m as se}from"./theme-toggle-8f47e51b.js";import{u as oe}from"./function-8e1ac392.js";/* empty css            */import"./badge-d476bc82.js";import"./skeleton-0ede1161.js";import"./ApplicationLogo-b7a403a9.js";import"./ApplicationLogoMask-47c3732b.js";function Se({auth:w,type:R="complete"}){const N=B(),y=t=>e.jsx(H,{record:t});let T=e.jsx(K,{});const[p,k]=r.useState(!1),[m,E]=r.useState(""),[h,L]=r.useState(R);r.useEffect(()=>{if(!N){const t=setTimeout(()=>{C(u),c()},500);return()=>{clearTimeout(t)}}},[m,p]);let u=5;const[g,F]=r.useState(0),[j,I]=r.useState(0),[x,C]=r.useState(u),[D,S]=r.useState(!1);r.useEffect(()=>{c()},[x]);const[$,v]=r.useState(!0),[q,A]=r.useState(5),[a,_]=r.useState([]),[i,b]=r.useState(null);r.useEffect(()=>{A(a.length>0?a.length:3)},[a]);const c=async()=>{i instanceof AbortController&&i.abort();const t=new AbortController;b(t),v(!0);const s=[],n={limit:x,filter_status:h,keyword:m};for(const o in n)s.push(encodeURIComponent(o)+"="+encodeURIComponent(n[o]));try{let l=(await f.get(`${route("api.record.v1.list")}?${s.join("&")}`,{cancelToken:new f.CancelToken(function(P){t.abort=P})})).data;_(l.result.data),S(l.result.has_more),F(l.result.data.length),"total"in l.result&&I(l.result.total),v(!1),b(null)}catch(o){f.isCancel(o)?console.log("Request was canceled",o):console.error("Error:",o)}};return r.useEffect(()=>{const t=()=>{setTimeout(()=>{c()},100)};return document.addEventListener("dialog.record.hidden",t),document.addEventListener("record.deleted-action",t),()=>{document.removeEventListener("dialog.record.hidden",t),document.removeEventListener("record.deleted-action",t)}}),e.jsx(e.Fragment,{children:e.jsxs(z,{user:w.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Record List"}),children:[e.jsx(O,{title:"Record List"}),e.jsx("div",{className:"flex flex-col gap-6",children:e.jsxs(G,{className:"",children:[e.jsx(J,{children:e.jsxs("div",{className:" flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(M,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(Q,{children:"See your latest transaction"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{i instanceof AbortController&&i.abort(),c()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}),e.jsx(d,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{document.dispatchEvent(new CustomEvent("record.edit-action",{bubbles:!0}))},children:e.jsx("i",{className:"fa-solid fa-plus"})})]})]})}),e.jsxs(V,{className:" flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(X,{placeholder:"Search by record notes",value:m,onChange:t=>{E(t.target.value)}}),e.jsxs(Y,{open:p,onOpenChange:k,children:[e.jsx(Z,{asChild:!0,children:e.jsx(d,{className:" w-10 aspect-square",children:e.jsx("i",{className:"fa-solid fa-filter"})})}),e.jsxs(ee,{className:" h-full md:h-auto lg:min-w-[800px] max-md:!max-h-[85vh] flex flex-col gap-6","data-type":"record-dialog",children:[e.jsxs(te,{children:[e.jsx(re,{children:"Record: Filter"}),e.jsx(se,{children:e.jsx("span",{children:"Show record data based on certain condition"})})]}),e.jsx("div",{className:" flex flex-col gap-4",children:e.jsx("div",{className:" flex flex-row gap-1 w-full border p-1 rounded-md",children:(()=>{let t=[];return["complete","pending"].map((s,n)=>{t.push(e.jsx("div",{className:` w-full text-center py-1 rounded-sm cursor-pointer ${h===s?"bg-primary ":" dark:!text-white !text-black hover:!text-primary-foreground"} text-primary-foreground hover:bg-primary/90 transition`,onClick:()=>{L(s)},children:e.jsx("span",{className:" text-sm font-semibold",children:oe(s)})},`record_type-${s}`))}),t.length>0?t:e.jsx(e.Fragment,{})})()})})]})]})]}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if($){let t=[];for(let s=0;s<q;s++)t.push(e.jsx("div",{children:T},`skeleton-${s}`));return t}else{let t=[],s=e.jsx(U,{});return a.length>0&&a.map((n,o)=>{t.push(e.jsx("div",{children:y(n)},`record_item-${o}`))}),t.length>0?t:s}})()})]}),e.jsxs(W,{className:"flex justify-between items-center",children:[e.jsx(d,{variant:"outline",className:"",disabled:!D,onClick:()=>{S(!1),C(x+u)},children:"Load more"}),(()=>g>0&&j>0?e.jsx(e.Fragment,{children:e.jsxs("span",{className:"text-sm",children:["Showing ",g," of ",j," entries"]})}):e.jsx(e.Fragment,{}))()]})]})})]})})}export{Se as default};
