import{j as e,r as s,e as h,a as A,d as D}from"./app-2ff53231.js";import{u as $,B as c}from"./button-6ba3b389.js";import{S as p}from"./skeleton-8c0cd626.js";import{T as _}from"./TemplateList-005def9c.js";import{T as B}from"./TemplateNoData-ff1fe73b.js";import{S as K}from"./SystemLayout-33ee3dc4.js";import{C as P,b as U,c as H,d as M,a as z,e as G}from"./card-49a77b4f.js";import{I as J}from"./input-0ed7b262.js";/* empty css            */import"./check-03cc35d4.js";import"./index-fe97bc45.js";/* empty css              */import"./ApplicationLogo-723b907c.js";import"./scroll-area-1390c45c.js";import"./theme-toggle-69cdad1e.js";import"./ApplicationLogoMask-30723c20.js";function O(){let u=(Math.random()+1).toString(36).substring(7);return e.jsx("section",{children:e.jsx("div",{className:" flex flex-col gap-2 border rounded p-4",children:e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsx(p,{className:"w-[100px] h-[20px] rounded-full"}),e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(p,{className:"w-[75px] h-[20px] rounded-full"}),e.jsx(p,{className:"w-[10px] h-[20px] rounded-full"})]})]})})},u)}function me({auth:u}){const j=$(),[S,w]=s.useState(!0);s.useEffect(()=>{r()},[]);const[m,E]=s.useState("");s.useEffect(()=>{if(!j){const t=setTimeout(()=>{b(f),r()},500);return()=>{clearTimeout(t)}}},[m]);const[i,g]=s.useState(null),[n,L]=s.useState();let f=5;const[v,y]=s.useState(0),[C,k]=s.useState(0),[x,b]=s.useState(f),[T,N]=s.useState(!1),r=async()=>{w(!0),i instanceof AbortController&&i.abort();const t=new AbortController;g(t);const d=[],l={limit:x,keyword:m};for(const a in l)d.push(encodeURIComponent(a)+"="+encodeURIComponent(l[a]));try{let o=(await h.get(`${route("api.wallet.v1.list")}?${d.join("&")}`,{cancelToken:new h.CancelToken(function(q){t.abort=q})})).data;L(o.result.data),N(o.result.has_more),y(o.result.data.length),"total"in o.result&&k(o.result.total),w(!1),g(null)}catch(a){h.isCancel(a)?console.log("Request was canceled",a):console.error("Error:",a)}};s.useEffect(()=>{j||r()},[x]);const[I,W]=s.useState(5);let F=()=>e.jsx(O,{});s.useEffect(()=>{n&&W(n.length>0?n.length:3)},[n]);let R=t=>e.jsx(_,{wallet:t});return s.useEffect(()=>{const t=()=>{setTimeout(()=>{r()},100)};return document.addEventListener("dialog.wallet.hidden",t),document.addEventListener("wallet.deleted-action",t),document.addEventListener("dialog.wallet.balance-adjustment.hidden",t),document.addEventListener("dialog.record.hidden",t),()=>{document.removeEventListener("dialog.wallet.hidden",t),document.removeEventListener("wallet.deleted-action",t),document.removeEventListener("dialog.wallet.balance-adjustment.hidden",t),document.removeEventListener("dialog.record.hidden",t)}}),e.jsx(e.Fragment,{children:e.jsxs(K,{user:u.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Wallet List"}),fabAction:["wallet"],children:[e.jsx(A,{title:"Wallet List"}),e.jsxs(P,{className:" w-full",children:[e.jsx(U,{children:e.jsxs("div",{className:" flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(H,{children:e.jsx("div",{children:"Wallet: List"})}),e.jsx(M,{children:"List of your available Categories"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{i instanceof AbortController&&i.abort(),r()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}),e.jsx(c,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{document.dispatchEvent(new CustomEvent("wallet.edit-action",{bubbles:!0}))},children:e.jsx("i",{className:"fa-solid fa-plus"})})]})]})}),e.jsx(z,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(J,{placeholder:"Search by Wallet name",value:m,onChange:t=>{E(t.target.value)}}),e.jsx("div",{className:" flex flex-row gap-2",children:e.jsx(D,{href:route("sys.wallet.re-order.index"),className:"aspect-square",children:e.jsx(c,{variant:"outline",className:" w-10 aspect-square",children:e.jsx("i",{className:"fa-solid fa-sort"})})})})]}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{let t=[],d=e.jsx(B,{});if(S)for(let l=0;l<I;l++)t.push(e.jsx("div",{children:F()},`skeleton-${l}`));else n&&n.length>0&&n.map((l,a)=>{t.push(e.jsx("div",{children:R(l)},`wallet_item-${a}`))});return t.length>0?t:d})()})]})}),e.jsxs(G,{className:"flex justify-between items-center",children:[e.jsx(c,{variant:"outline",className:"dark:border-white",disabled:!T,onClick:()=>{N(!1),b(x+f)},children:"Load more"}),(()=>v>0&&C>0?e.jsx(e.Fragment,{children:e.jsxs("span",{className:"text-sm",children:["Showing ",v," of ",C," entries"]})}):e.jsx(e.Fragment,{}))()]})]})]})})}export{me as default};
