import{j as e,r as s,e as h,a as A,d as D}from"./app-dede7cfd.js";import{u as $,B as d}from"./button-fd7c0906.js";import{S as p}from"./skeleton-0ede1161.js";import{T as _}from"./TemplateList-df176ccf.js";import{T as B}from"./TemplateNoData-a84084af.js";import{S as K}from"./SystemLayout-2689f417.js";import{C as P,b as U,c as H,d as M,a as z,e as G}from"./card-e1c4d71b.js";import{I as J}from"./input-bef20f18.js";/* empty css            */import"./function-8e1ac392.js";import"./ApplicationLogo-b7a403a9.js";import"./theme-toggle-8f47e51b.js";import"./ApplicationLogoMask-47c3732b.js";function O(){let u=(Math.random()+1).toString(36).substring(7);return e.jsx("section",{children:e.jsx("div",{className:" flex flex-col gap-2 border rounded p-4",children:e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsx(p,{className:"w-[100px] h-[20px] rounded-full"}),e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(p,{className:"w-[75px] h-[20px] rounded-full"}),e.jsx(p,{className:"w-[10px] h-[20px] rounded-full"})]})]})})},u)}function ce({auth:u}){const j=$(),[S,w]=s.useState(!0);s.useEffect(()=>{r()},[]);const[m,y]=s.useState("");s.useEffect(()=>{if(!j){const t=setTimeout(()=>{b(f),r()},500);return()=>{clearTimeout(t)}}},[m]);const[i,g]=s.useState(null),[n,E]=s.useState();let f=5;const[C,k]=s.useState(0),[v,L]=s.useState(0),[x,b]=s.useState(f),[T,N]=s.useState(!1),r=async()=>{w(!0),i instanceof AbortController&&i.abort();const t=new AbortController;g(t);const c=[],l={limit:x,keyword:m};for(const a in l)c.push(encodeURIComponent(a)+"="+encodeURIComponent(l[a]));try{let o=(await h.get(`${route("api.wallet.v1.list")}?${c.join("&")}`,{cancelToken:new h.CancelToken(function(q){t.abort=q})})).data;E(o.result.data),N(o.result.has_more),k(o.result.data.length),"total"in o.result&&L(o.result.total),w(!1),g(null)}catch(a){h.isCancel(a)?console.log("Request was canceled",a):console.error("Error:",a)}};s.useEffect(()=>{j||r()},[x]);const[I,W]=s.useState(5);let F=()=>e.jsx(O,{});s.useEffect(()=>{n&&W(n.length>0?n.length:3)},[n]);let R=t=>e.jsx(_,{wallet:t});return s.useEffect(()=>{const t=()=>{setTimeout(()=>{r()},100)};return document.addEventListener("dialog.wallet.hidden",t),document.addEventListener("wallet.deleted-action",t),()=>{document.removeEventListener("dialog.wallet.hidden",t),document.removeEventListener("wallet.deleted-action",t)}}),e.jsx(e.Fragment,{children:e.jsxs(K,{user:u.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Wallet List"}),fabAction:["wallet"],children:[e.jsx(A,{title:"Wallet List"}),e.jsxs(P,{className:" w-full",children:[e.jsx(U,{children:e.jsxs("div",{className:" flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(H,{children:e.jsx("div",{children:"Wallet: List"})}),e.jsx(M,{children:"List of your available Categories"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{i instanceof AbortController&&i.abort(),r()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}),e.jsx(d,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{document.dispatchEvent(new CustomEvent("wallet.edit-action",{bubbles:!0}))},children:e.jsx("i",{className:"fa-solid fa-plus"})})]})]})}),e.jsx(z,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(J,{placeholder:"Search by Wallet name",value:m,onChange:t=>{y(t.target.value)}}),e.jsx("div",{className:" flex flex-row gap-2",children:e.jsx(D,{href:route("sys.wallet.re-order.index"),className:"aspect-square",children:e.jsx(d,{variant:"outline",className:" w-10 aspect-square",children:e.jsx("i",{className:"fa-solid fa-sort"})})})})]}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{let t=[],c=e.jsx(B,{});if(S)for(let l=0;l<I;l++)t.push(e.jsx("div",{children:F()},`skeleton-${l}`));else n&&n.length>0&&n.map((l,a)=>{t.push(e.jsx("div",{children:R(l)},`wallet_item-${a}`))});return t.length>0?t:c})()})]})}),e.jsxs(G,{className:"flex justify-between items-center",children:[e.jsx(d,{variant:"outline",className:"dark:border-white",disabled:!T,onClick:()=>{N(!1),b(x+f)},children:"Load more"}),(()=>C>0&&v>0?e.jsx(e.Fragment,{children:e.jsxs("span",{className:"text-sm",children:["Showing ",C," of ",v," entries"]})}):e.jsx(e.Fragment,{}))()]})]})]})})}export{ce as default};
