import{j as e,r as s,e as h,a as $,d as D}from"./app-d16b799f.js";import{u as _,B as i}from"./button-899873d5.js";import{T as q}from"./TemplateList-55965ecc.js";import{T as B}from"./TemplateNoData-70a5ed04.js";import{S as K}from"./SystemLayout-f892d8da.js";import{C as P,b as U,c as H,a as M,e as z}from"./card-13a978e4.js";import{S as j}from"./skeleton-05afca0c.js";import{I as G}from"./input-f39ac078.js";import"./Combination-17349819.js";import"./dropdown-menu-7be52bbd.js";import"./ApplicationLogo-2e791cc6.js";import"./ApplicationLogoMask-12f49f23.js";import"./textarea-abf45f9c.js";function J(){let u=(Math.random()+1).toString(36).substring(7);return e.jsx("section",{children:e.jsx("div",{className:" flex flex-col gap-2 border rounded p-4",children:e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsx(j,{className:"w-[100px] h-[20px] rounded-full"}),e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(j,{className:"w-[75px] h-[20px] rounded-full"}),e.jsx(j,{className:"w-[10px] h-[20px] rounded-full"})]})]})})},u)}function ie({auth:u}){const p=_(),[N,w]=s.useState(!0);s.useEffect(()=>{r()},[]);const[m,y]=s.useState("");s.useEffect(()=>{if(!p){const t=setTimeout(()=>{b(f),r()},500);return()=>{clearTimeout(t)}}},[m]);const[c,g]=s.useState(null);s.useState(!0);const[n,E]=s.useState();let f=5;const[C,k]=s.useState(0),[v,L]=s.useState(0),[x,b]=s.useState(f),[T,S]=s.useState(!1),r=async()=>{w(!0),c instanceof AbortController&&c.abort();const t=new AbortController;g(t);const a=[],d={limit:x,keyword:m};for(const l in d)a.push(encodeURIComponent(l)+"="+encodeURIComponent(d[l]));try{let o=(await h.get(`${route("api.wallet.v1.list")}?${a.join("&")}`,{cancelToken:new h.CancelToken(function(A){t.abort=A})})).data;E(o.result.data),S(o.result.has_more),k(o.result.data.length),"total"in o.result&&L(o.result.total),w(!1),g(null)}catch(l){h.isCancel(l)?console.log("Request was canceled",l):console.error("Error:",l)}};s.useEffect(()=>{p||r()},[x]);const[I,W]=s.useState(5);let R=()=>e.jsx(J,{});s.useEffect(()=>{n&&W(n.length>0?n.length:3)},[n]);let F=t=>e.jsx(q,{wallet:t});return s.useEffect(()=>{const t=()=>{setTimeout(()=>{r()},100)};return document.addEventListener("dialog.wallet.hidden",t),document.addEventListener("wallet.deleted-action",t),()=>{document.removeEventListener("dialog.wallet.hidden",t),document.removeEventListener("wallet.deleted-action",t)}}),e.jsx(e.Fragment,{children:e.jsxs(K,{user:u.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Wallet List"}),fabAction:["wallet"],children:[e.jsx($,{title:"Wallet List"}),e.jsxs(P,{className:" w-full",children:[e.jsx(U,{children:e.jsxs("div",{className:" flex flex-row justify-between items-start",children:[e.jsx("div",{children:e.jsx(H,{children:e.jsx("div",{children:"Wallet: List"})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[(()=>e.jsx(i,{variant:"outline",onClick:()=>{c instanceof AbortController&&c.abort(),r()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}))(),e.jsx(i,{variant:"outline",onClick:()=>{document.dispatchEvent(new CustomEvent("wallet.edit-action",{bubbles:!0}))},children:e.jsx("i",{className:"fa-solid fa-plus"})})]})]})}),e.jsx(M,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-4",children:[e.jsx(G,{placeholder:"Search by Wallet name",value:m,onChange:t=>{y(t.target.value)}}),e.jsx(i,{disabled:!0,children:e.jsx("i",{className:"fa-solid fa-filter"})}),e.jsx(D,{href:route("sys.wallet.re-order.index"),children:e.jsx(i,{variant:"outline",children:e.jsx("i",{className:"fa-solid fa-sort"})})})]}),(()=>{if(N){let t=[];for(let a=0;a<I;a++)t.push(e.jsx("div",{children:R()},`skeleton-${a}`));return t}else{let t=[],a=e.jsx(B,{});return n&&n.length>0&&n.map((d,l)=>{t.push(e.jsx("div",{children:F(d)},`wallet_item-${l}`))}),t.length>0?t:a}})()]})}),e.jsxs(z,{className:"flex justify-between items-center",children:[e.jsx(i,{variant:"outline",className:"dark:border-white",disabled:!T,onClick:()=>{S(!1),b(x+f)},children:"Load more"}),(()=>C>0&&v>0?e.jsx(e.Fragment,{children:e.jsxs("span",{className:"text-sm",children:["Showing ",C," of ",v," entries"]})}):e.jsx(e.Fragment,{}))()]})]})]})})}export{ie as default};
