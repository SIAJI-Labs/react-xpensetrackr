import{j as e,r as s,e as h,a as $}from"./app-9b797eab.js";import{S as D}from"./SystemLayout-a279e95d.js";import{C as _,b as q,c as B,a as K,e as P}from"./card-4c293859.js";import{S as p}from"./skeleton-a8f7b09a.js";import{u as U,B as d}from"./button-e96d6135.js";import{I as H}from"./input-5acbf981.js";import{T as M}from"./TemplateList-631f4c33.js";import{T as z}from"./TemplateNoData-790ebee6.js";import"./Combination-6ff7b57c.js";import"./ApplicationLogo-e9eb68ef.js";import"./ApplicationLogoMask-3b52cb17.js";import"./dropdown-menu-9e10cee1.js";import"./textarea-a07d8151.js";function G(){let u=(Math.random()+1).toString(36).substring(7);return e.jsx("section",{children:e.jsx("div",{className:" flex flex-col gap-2 border rounded p-4",children:e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsx(p,{className:"w-[100px] h-[20px] rounded-full"}),e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(p,{className:"w-[75px] h-[20px] rounded-full"}),e.jsx(p,{className:"w-[10px] h-[20px] rounded-full"})]})]})})},u)}function oe({auth:u}){const j=U(),[N,w]=s.useState(!0);s.useEffect(()=>{r()},[]);const[m,E]=s.useState("");s.useEffect(()=>{if(!j){const t=setTimeout(()=>{v(f),r()},500);return()=>{clearTimeout(t)}}},[m]);const[i,g]=s.useState(null);s.useState(!0);const[n,k]=s.useState();let f=5;const[C,y]=s.useState(0),[b,L]=s.useState(0),[x,v]=s.useState(f),[T,S]=s.useState(!1),r=async()=>{w(!0),i instanceof AbortController&&i.abort();const t=new AbortController;g(t);const a=[],c={limit:x,keyword:m};for(const l in c)a.push(encodeURIComponent(l)+"="+encodeURIComponent(c[l]));try{let o=(await h.get(`${route("api.wallet.v1.list")}?${a.join("&")}`,{cancelToken:new h.CancelToken(function(A){t.abort=A})})).data;k(o.result.data),S(o.result.has_more),y(o.result.data.length),"total"in o.result&&L(o.result.total),w(!1),g(null)}catch(l){h.isCancel(l)?console.log("Request was canceled",l):console.error("Error:",l)}};s.useEffect(()=>{j||r()},[x]);const[I,W]=s.useState(5);let R=()=>e.jsx(G,{});s.useEffect(()=>{n&&W(n.length>0?n.length:3)},[n]);let F=t=>e.jsx(M,{wallet:t});return s.useEffect(()=>{const t=()=>{setTimeout(()=>{r()},100)};return document.addEventListener("dialog.wallet.hidden",t),document.addEventListener("wallet.deleted-action",t),()=>{document.removeEventListener("dialog.wallet.hidden",t),document.removeEventListener("wallet.deleted-action",t)}}),e.jsx(e.Fragment,{children:e.jsxs(D,{user:u.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Wallet List"}),fabAction:["wallet"],children:[e.jsx($,{title:"Wallet List"}),e.jsxs(_,{className:" w-full",children:[e.jsx(q,{children:e.jsxs("div",{className:" flex flex-row justify-between items-start",children:[e.jsx("div",{children:e.jsx(B,{children:e.jsx("div",{children:"Wallet: List"})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[(()=>e.jsx(d,{variant:"outline",onClick:()=>{i instanceof AbortController&&i.abort(),r()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}))(),e.jsx(d,{variant:"outline",onClick:()=>{document.dispatchEvent(new CustomEvent("wallet.edit-action",{bubbles:!0}))},children:e.jsx("i",{className:"fa-solid fa-plus"})})]})]})}),e.jsx(K,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-4",children:[e.jsx(H,{placeholder:"Search by Wallet name",value:m,onChange:t=>{E(t.target.value)}}),e.jsx(d,{disabled:!0,children:e.jsx("i",{className:"fa-solid fa-filter"})})]}),(()=>{if(N){let t=[];for(let a=0;a<I;a++)t.push(e.jsx("div",{children:R()},`skeleton-${a}`));return t}else{let t=[],a=e.jsx(z,{});return n&&n.length>0&&n.map((c,l)=>{t.push(e.jsx("div",{children:F(c)},`wallet_item-${l}`))}),t.length>0?t:a}})()]})}),e.jsxs(P,{className:"flex justify-between items-center",children:[e.jsx(d,{variant:"outline",className:"dark:border-white",disabled:!T,onClick:()=>{S(!1),v(x+f)},children:"Load more"}),(()=>C>0&&b>0?e.jsx(e.Fragment,{children:e.jsxs("span",{className:"text-sm",children:["Showing ",C," of ",b," entries"]})}):e.jsx(e.Fragment,{}))()]})]})]})})}export{oe as default};
