import{r as n,j as e,d as $,e as C,a as O}from"./app-49e19f09.js";import{B as j,u as q}from"./button-8f2a595a.js";import{D as B,a as H,b as _,c as b,T as K}from"./TemplateNoData-b0444318.js";import{S as y}from"./skeleton-3b1a4842.js";import{S as P}from"./SystemLayout-a53fff85.js";import{C as U,b as z,c as G,d as J,a as Q,e as V}from"./card-2c105230.js";import{I as W}from"./input-d9c06e18.js";/* empty css            */import"./index-961138f1.js";import"./index-61f18b0c.js";/* empty css              */import"./index-84c40666.js";import"./dialog-dd6b0ada.js";import"./drawer-134f179f.js";import"./theme-toggle-66897dc1.js";import"./ErrorMessage-9da431ff.js";import"./scroll-area-8438057d.js";import"./ApplicationLogoMask-c668ea73.js";import"./ApplicationLogo-c5ad270c.js";function X({tags:t,deleteAction:f=!0,editAction:w=!0}){let x=(Math.random()+1).toString(36).substring(7);const[d,c]=n.useState(!1);return n.useEffect(()=>{const r=()=>{setTimeout(()=>{c(!1)},100)};return document.addEventListener("dialog.tags.shown",r),()=>{document.removeEventListener("dialog.tags.shown",r)}}),e.jsx("section",{onClick:r=>{c(!0)},children:e.jsx("div",{className:" flex flex-col gap-2 border rounded p-4 cursor-pointer",children:e.jsxs("div",{className:" flex flex-row gap-6 justify-between",children:[e.jsx("span",{className:" font-medium w-full md:w-auto whitespace-nowrap overflow-hidden text-ellipsis",children:t&&"name"in t?`${t==null?void 0:t.name}`:"-"}),e.jsx("div",{className:" flex flex-row flex-1 md:flex-none justify-between gap-2 items-center",children:e.jsx("div",{children:e.jsxs(B,{open:d,onOpenChange:c,children:[e.jsx(H,{asChild:!0,children:e.jsx(j,{variant:"link",className:" p-0 h-auto leading-none dark:!text-white !text-black","data-type":"dropdown-trigger",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})})}),e.jsxs(_,{sideOffset:5,alignOffset:0,side:"left",align:"start",children:[(()=>t&&"uuid"in t?e.jsx(e.Fragment,{children:e.jsx($,{href:route("sys.tags.show",{uuid:t.uuid}),children:e.jsx(b,{className:" cursor-pointer",children:e.jsx("span",{className:" text-blue-500",children:"Detail"})})})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("tags-dialogSection")&&w?e.jsx(b,{className:" cursor-pointer",onClick:p=>{let a=p.target;if(a){let h=a.innerHTML;a.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const l=()=>{h&&(a.innerHTML=h),document.removeEventListener("dialog.tags.shown",l)};document.addEventListener("dialog.tags.shown",l)}document.dispatchEvent(new CustomEvent("tags.edit-action",{bubbles:!0,detail:{uuid:t&&"uuid"in t?t==null?void 0:t.uuid:""}}))},children:e.jsx("span",{className:" text-yellow-500",children:"Edit"})}):e.jsx(e.Fragment,{}))(),(()=>{let r=document.getElementById("tags-deleteDialogSection");return f&&r?e.jsx(b,{className:" cursor-pointer",onClick:()=>{document.dispatchEvent(new CustomEvent("tags.delete-action",{bubbles:!0,detail:{uuid:t&&"uuid"in t?t==null?void 0:t.uuid:null,action:"delete"}}))},children:e.jsx("span",{className:" text-red-500",children:"Delete"})}):e.jsx(e.Fragment,{})})()]})]})})})]})})},x)}function Y(){let t=(Math.random()+1).toString(36).substring(7);return e.jsx("section",{children:e.jsx("div",{className:" flex flex-col gap-2 border rounded p-4",children:e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsx(y,{className:"w-[100px] h-[20px] rounded-full"}),e.jsx("div",{className:" flex flex-row gap-2",children:e.jsx(y,{className:"w-[10px] h-[20px] rounded-full"})})]})})},t)}function we({auth:t}){const f=q(),[w,x]=n.useState(!0);n.useEffect(()=>{u()},[]);const[d,c]=n.useState("");n.useEffect(()=>{if(!f){const s=setTimeout(()=>{T(l),u()},500);return()=>{clearTimeout(s)}}},[d]);const[r,p]=n.useState(null),[a,h]=n.useState();let l=5;const[N,L]=n.useState(0),[S,k]=n.useState(0),[v,T]=n.useState(l),[D,E]=n.useState(!1),u=async()=>{x(!0),r instanceof AbortController&&r.abort();const s=new AbortController;p(s);const o=[],g={limit:v,keyword:d};for(const i in g)o.push(encodeURIComponent(i)+"="+encodeURIComponent(g[i]));try{let m=(await C.get(`${route("api.tags.v1.list")}?${o.join("&")}`,{cancelToken:new C.CancelToken(function(A){s.abort=A})})).data;h(m.result.data),E(m.result.has_more),L(m.result.data.length),"total"in m.result&&k(m.result.total),x(!1),p(null)}catch(i){C.isCancel(i)?console.log("Request was canceled",i):console.error("Error:",i)}};n.useEffect(()=>{f||u()},[v]);const[I,F]=n.useState(5);let M=()=>e.jsx(Y,{});n.useEffect(()=>{a&&F(a.length>0?a.length:3)},[a]);let R=s=>e.jsx(X,{tags:s});return n.useEffect(()=>{const s=()=>{setTimeout(()=>{u()},100)};return document.addEventListener("dialog.tags.hidden",s),document.addEventListener("tags.deleted-action",s),()=>{document.removeEventListener("dialog.tags.hidden",s),document.removeEventListener("tags.deleted-action",s)}}),e.jsx(e.Fragment,{children:e.jsxs(P,{user:t.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Tags List"}),fabAction:["tags"],children:[e.jsx(O,{title:"Tags List"}),e.jsxs(U,{className:" w-full",children:[e.jsx(z,{children:e.jsxs("div",{className:" flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(G,{children:e.jsx("div",{children:"Tags: List"})}),e.jsx(J,{children:"List of your available Tags"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{r instanceof AbortController&&r.abort(),u()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}),e.jsx(j,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{document.dispatchEvent(new CustomEvent("tags.edit-action",{bubbles:!0}))},children:e.jsx("i",{className:"fa-solid fa-plus"})})]})]})}),e.jsx(Q,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:" flex flex-row gap-2",children:e.jsx(W,{placeholder:"Search by Tags name",value:d,onChange:s=>{c(s.target.value)}})}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(w){let s=[];for(let o=0;o<I;o++)s.push(e.jsx("div",{children:M()},`skeleton-${o}`));return s}else{let s=[],o=e.jsx(K,{});return a&&a.length>0&&a.map((g,i)=>{s.push(e.jsx("div",{children:R(g)},`tags_item-${i}`))}),s.length>0?s:o}})()})]})}),e.jsxs(V,{className:"flex justify-between items-center",children:[e.jsx(j,{variant:"outline",className:"dark:border-white",disabled:!D,onClick:()=>{E(!1),T(v+l)},children:"Load more"}),(()=>N>0&&S>0?e.jsx(e.Fragment,{children:e.jsxs("span",{className:"text-sm",children:["Showing ",N," of ",S," entries"]})}):e.jsx(e.Fragment,{}))()]})]})]})})}export{we as default};
