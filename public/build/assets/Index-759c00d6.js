import{j as e,r as s,e as p,a as D}from"./app-0f7f6890.js";import{R as A}from"./RecordTemplate-b942dd68.js";import{S as o,N as F}from"./skeleton-9245f950.js";import{S as P}from"./SystemLayout-e515f18f.js";import{C as _,b as $,c as q,d as B,a as K,e as U}from"./card-43f822a6.js";import{B as i}from"./button-ca44c454.js";import{I as H}from"./input-72062d81.js";import"./Combination-efa42deb.js";import"./badge-2468a7a7.js";import"./dropdown-menu-7ce55958.js";import"./ApplicationLogo-d7e14e46.js";import"./ApplicationLogoMask-0391dc39.js";import"./textarea-cd17f820.js";function M(){let x=(Math.random()+1).toString(36).substring(7);return e.jsx("section",{children:e.jsxs("div",{className:" flex flex-col gap-2 border rounded p-4",children:[e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsx(o,{className:"w-[100px] h-[20px] rounded-full"}),e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(o,{className:"w-[75px] h-[20px] rounded-full"}),e.jsx(o,{className:"w-[10px] h-[20px] rounded-full"})]})]}),e.jsxs("div",{className:" flex flex-row gap-4 items-center",children:[e.jsx("div",{className:"",children:e.jsx(o,{className:"w-[50px] h-[50px] rounded-full"})}),e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx(o,{className:"w-[150px] h-[15px] rounded-full"}),e.jsx(o,{className:"w-[75px] h-[10px] rounded-full"})]})]}),e.jsxs("div",{className:" flex flex-row gap-4",children:[e.jsx(o,{className:"w-[50px] h-[20px] rounded-full"}),e.jsx(o,{className:"w-[50px] h-[20px] rounded-full"}),e.jsx(o,{className:"w-[50px] h-[20px] rounded-full"})]})]})},x)}function ae({auth:x}){const[O,C]=s.useState(!1),w=t=>e.jsx(A,{record:t});let S=e.jsx(M,{});const[u,R]=s.useState(""),[b,z]=s.useState("complete");s.useEffect(()=>{const t=setTimeout(()=>{h(m),c()},500);return()=>{clearTimeout(t)}},[u]);let m=5;const[f,h]=s.useState(m),[E,j]=s.useState(!1);s.useEffect(()=>{c()},[f]);const[y,g]=s.useState(!0),[L,k]=s.useState(5),[a,I]=s.useState([]),[n,v]=s.useState(null);s.useEffect(()=>{k(a.length>0?a.length:3)},[a]);const c=async()=>{n instanceof AbortController&&n.abort();const t=new AbortController;v(t),g(!0);const l=[],d={limit:f,filter_status:b,keyword:u};for(const r in d)l.push(encodeURIComponent(r)+"="+encodeURIComponent(d[r]));try{let N=(await p.get(`${route("api.record.v1.list")}?${l.join("&")}`,{cancelToken:new p.CancelToken(function(T){t.abort=T})})).data;I(N.result.data),j(N.result.has_more),g(!1),v(null)}catch(r){p.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}};return s.useEffect(()=>{const t=()=>{setTimeout(()=>{console.log("Dialog Event"),c(),C(!1)},100)};return document.addEventListener("dialog.record.hidden",t),document.addEventListener("record.deleted-action",t),()=>{document.removeEventListener("dialog.record.hidden",t),document.removeEventListener("record.deleted-action",t)}}),e.jsx(e.Fragment,{children:e.jsxs(P,{user:x.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Record List"}),children:[e.jsx(D,{title:"Record List"}),e.jsx("div",{className:"flex flex-col gap-6",children:e.jsxs(_,{className:"",children:[e.jsx($,{children:e.jsxs("div",{className:" flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(q,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(B,{children:"See your latest transaction"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(()=>e.jsx(i,{variant:"outline",onClick:()=>{n instanceof AbortController&&n.abort(),c()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}))(),e.jsx(i,{variant:"outline",onClick:()=>{document.dispatchEvent(new CustomEvent("recordDialogEditAction",{bubbles:!0}))},children:e.jsx("i",{className:"fa-solid fa-plus"})})]})]})}),e.jsxs(K,{className:" flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-4",children:[e.jsx(H,{placeholder:"Search by record notes",value:u,onChange:t=>{R(t.target.value)}}),e.jsx(i,{children:e.jsx("i",{className:"fa-solid fa-filter"})})]}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(y){let t=[];for(let l=0;l<L;l++)t.push(e.jsx("div",{children:S},`skeleton-${l}`));return t}else{let t=[],l=e.jsx(F,{});return a.length>0&&a.map((d,r)=>{t.push(e.jsx("div",{children:w(d)},`record_item-${r}`))}),t.length>0?t:l}})()})]}),e.jsx(U,{children:e.jsx(i,{variant:"outline",className:"",disabled:!E,onClick:()=>{j(!1),h(f+m)},children:"Load more"})})]})})]})})}export{ae as default};
