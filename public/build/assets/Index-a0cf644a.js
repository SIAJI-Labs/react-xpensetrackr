import{r as t,e as c,j as e,a as H,d as P}from"./app-5552f331.js";import{S as _}from"./SystemLayout-355f1634.js";import{b as q,u as M,B as i}from"./button-e62a8511.js";import{S as a,R as U}from"./skeleton-a54368de.js";import{N as z}from"./NoDataTemplate-e39c0a6a.js";import{C as b,b as C,c as v,d as R,a as y,e as O}from"./card-1260b71b.js";import{B as G}from"./badge-fc18d584.js";import"./function-6b0ad136.js";import"./ApplicationLogo-fc7a4aa2.js";import"./ApplicationLogoMask-3327d467.js";import"./dropdown-menu-14cd8979.js";import"./Combination-599f7e70.js";import"./textarea-fde31245.js";import"./input-50ab338a.js";const J=q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function de({auth:p,inspire:k=""}){const j=M();t.useState(!1);const[S,x]=t.useState(!1),[n,g]=t.useState("complete"),[u,m]=t.useState(!0),[L,E]=t.useState(5),[d,I]=t.useState([]),[f,N]=t.useState(null),[w,F]=t.useState(0);let T=e.jsx(e.Fragment,{children:e.jsxs("div",{className:" flex flex-col gap-2 border rounded p-4",children:[e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsx(a,{className:"w-[100px] h-[20px] rounded-full"}),e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(a,{className:"w-[75px] h-[20px] rounded-full"}),e.jsx(a,{className:"w-[10px] h-[20px] rounded-full"})]})]}),e.jsxs("div",{className:" flex flex-row gap-4 items-center",children:[e.jsx("div",{className:"",children:e.jsx(a,{className:"w-[50px] h-[50px] rounded-full"})}),e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx(a,{className:"w-[150px] h-[15px] rounded-full"}),e.jsx(a,{className:"w-[75px] h-[10px] rounded-full"})]})]}),e.jsxs("div",{className:" flex flex-row gap-4",children:[e.jsx(a,{className:"w-[50px] h-[20px] rounded-full"}),e.jsx(a,{className:"w-[50px] h-[20px] rounded-full"}),e.jsx(a,{className:"w-[50px] h-[20px] rounded-full"})]})]})});const D=s=>e.jsx(U,{record:s}),A=async()=>{x(!0),f instanceof AbortController&&f.abort();const s=new AbortController;N(s),m(!0);const r=[],o={limit:10,filter_status:n};for(const l in o)r.push(encodeURIComponent(l)+"="+encodeURIComponent(o[l]));try{let $=(await c.get(`${route("api.record.v1.list")}?${r.join("&")}`,{cancelToken:new c.CancelToken(function(B){s.abort=B})})).data;I($.result.data),m(!1),x(!1),N(null)}catch(l){c.isCancel(l)?console.log("Request was canceled",l):console.error("Error:",l)}};t.useEffect(()=>{j||h()},[n]),t.useEffect(()=>{E(d.length>0?d.length:3)},[d]);const h=async()=>{var s;x(!0);try{let o=(await c.get(route("api.record.v1.count-pending"))).data;F((s=o==null?void 0:o.result)==null?void 0:s.data),x(!1),A()}catch(r){c.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}};return t.useEffect(()=>{console.log("On load"),h()},[]),t.useEffect(()=>{if(!j){console.log("Handle record dialog");const s=r=>{setTimeout(()=>{h()},100)};return document.addEventListener("dialogRecord",s),()=>{document.removeEventListener("dialogRecord",s)}}}),e.jsxs(_,{user:p.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e.jsx(H,{title:"Dashboard"}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(b,{className:"",children:[e.jsx(C,{className:"",children:e.jsxs("div",{className:"flex flex-col space-y-2 ",children:[e.jsxs(v,{children:[e.jsx("span",{className:" font-light",children:"Hi"})," ",e.jsx("span",{className:" font-semibold",children:p.user.name}),","]}),e.jsx(R,{children:"how's doing? ðŸ‘‹"})]})}),e.jsx(y,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:k},className:" p-4 rounded-lg bg-gray-100 dark:bg-background dark:border"})})]}),e.jsxs(b,{className:" w-full",children:[e.jsx(C,{children:e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(v,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(R,{children:"See your latest transaction"})]}),(()=>S?e.jsx(i,{disabled:!0,children:e.jsx(J,{className:"h-4 w-4 animate-spin"})}):e.jsx(i,{variant:"outline",onClick:()=>{f instanceof AbortController&&f.abort(),h()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}))()]})}),e.jsxs(y,{className:" flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-4",id:"dashboard-recordList",children:[e.jsx(i,{variant:n==="complete"?"default":"outline",onClick:()=>{n!=="complete"&&(g("complete"),m(!u))},className:" dark:border-white",children:"Complete"}),e.jsxs(i,{variant:n==="pending"?"default":"outline",onClick:()=>{n!=="pending"&&(g("pending"),m(!u))},className:" flex flex-row gap-1 dark:border-white",children:[e.jsx("span",{children:"Pending"}),(()=>w>0?e.jsx(e.Fragment,{children:e.jsx(G,{className:`${n==="pending"?" bg-white text-primary":null} leading-none p-0 h-4 w-4 flex items-center justify-center`,children:w})}):e.jsx(e.Fragment,{}))()]})]}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(u){let s=[];for(let r=0;r<L;r++)s.push(e.jsx("div",{children:T},`skeleton-${r}`));return s}else{let s=[],r=e.jsx(z,{});return d.length>0&&d.map((o,l)=>{s.push(e.jsx("div",{children:D(o)},`record_item-${l}`))}),s.length>0?s:r}})()})]}),(()=>u?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(O,{children:e.jsx(P,{href:route("sys.record.index"),children:e.jsx(i,{variant:"outline",className:"dark:border-white",children:"Load all"})})})}))()]})]})]})}export{de as default};
