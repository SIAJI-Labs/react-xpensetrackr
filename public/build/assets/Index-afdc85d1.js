import{r,e as h,j as e,a as B}from"./app-18d9f852.js";import{u as H,B as d}from"./button-9dd4167c.js";import{u as K}from"./function-760846dd.js";import{T as U,S as z}from"./SkeletonList-24d3aaa6.js";import{T as G}from"./TemplateNoData-eda17c22.js";import{S as J}from"./SystemLayout-bc9b3845.js";import{D as M,i as Q,j as V,k as W,l as X,m as Y}from"./theme-toggle-847ca97f.js";import{C as Z,b as ee,c as te,d as re,a as se,e as oe}from"./card-95e85614.js";import{I as ae}from"./input-cdc49398.js";/* empty css            */import"./badge-560cb051.js";import"./skeleton-5603228f.js";import"./ApplicationLogo-e5e28616.js";import"./ApplicationLogoMask-96802939.js";function Se({auth:R,type:N="complete"}){const y=H(),E=t=>e.jsx(U,{record:t});let T=e.jsx(z,{});const[m,k]=r.useState(!1),[u,L]=r.useState(""),[p,F]=r.useState(N),g=()=>{if(!y){const t=setTimeout(()=>{v(x),c()},500);return()=>{clearTimeout(t)}}};r.useEffect(()=>{g()},[u]),r.useEffect(()=>{m||g()},[m]);let x=5;const[j,D]=r.useState(0),[C,I]=r.useState(0),[f,v]=r.useState(x),[$,S]=r.useState(!1);r.useEffect(()=>{c()},[f]);const[q,b]=r.useState(!0),[A,_]=r.useState(5),[a,P]=r.useState([]),[i,w]=r.useState(null);r.useEffect(()=>{_(a.length>0?a.length:3)},[a]);const c=async()=>{i instanceof AbortController&&i.abort();const t=new AbortController;w(t),b(!0);const s=[],n={limit:f,filter_status:p,keyword:u};for(const o in n)s.push(encodeURIComponent(o)+"="+encodeURIComponent(n[o]));try{let l=(await h.get(`${route("api.record.v1.list")}?${s.join("&")}`,{cancelToken:new h.CancelToken(function(O){t.abort=O})})).data;P(l.result.data),S(l.result.has_more),D(l.result.data.length),"total"in l.result&&I(l.result.total),b(!1),w(null)}catch(o){h.isCancel(o)?console.log("Request was canceled",o):console.error("Error:",o)}};return r.useEffect(()=>{const t=()=>{setTimeout(()=>{c()},100)};return document.addEventListener("dialog.record.hidden",t),document.addEventListener("record.deleted-action",t),()=>{document.removeEventListener("dialog.record.hidden",t),document.removeEventListener("record.deleted-action",t)}}),e.jsx(e.Fragment,{children:e.jsxs(J,{user:R.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Record List"}),children:[e.jsx(B,{title:"Record List"}),e.jsx("div",{className:"flex flex-col gap-6",children:e.jsxs(Z,{className:"",children:[e.jsx(ee,{children:e.jsxs("div",{className:" flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(te,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(re,{children:"See your latest transaction"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{i instanceof AbortController&&i.abort(),c()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}),e.jsx(d,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{document.dispatchEvent(new CustomEvent("record.edit-action",{bubbles:!0}))},children:e.jsx("i",{className:"fa-solid fa-plus"})})]})]})}),e.jsxs(se,{className:" flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(ae,{placeholder:"Search by record notes",value:u,onChange:t=>{L(t.target.value)}}),e.jsxs(M,{open:m,onOpenChange:k,children:[e.jsx(Q,{asChild:!0,children:e.jsx(d,{className:" w-10 aspect-square",children:e.jsx("i",{className:"fa-solid fa-filter"})})}),e.jsxs(V,{className:" h-full md:h-auto lg:min-w-[800px] max-md:!max-h-[85vh] flex flex-col gap-6","data-type":"record-dialog",children:[e.jsxs(W,{children:[e.jsx(X,{children:"Record: Filter"}),e.jsx(Y,{children:e.jsx("span",{children:"Show record data based on certain condition"})})]}),e.jsx("div",{className:" flex flex-col gap-4",children:e.jsx("div",{className:" flex flex-row gap-1 w-full border p-1 rounded-md",children:(()=>{let t=[];return["complete","pending"].map((s,n)=>{t.push(e.jsx("div",{className:` w-full text-center py-1 rounded-sm cursor-pointer ${p===s?"bg-primary ":" dark:!text-white !text-black hover:!text-primary-foreground"} text-primary-foreground hover:bg-primary/90 transition`,onClick:()=>{F(s)},children:e.jsx("span",{className:" text-sm font-semibold",children:K(s)})},`record_type-${s}`))}),t.length>0?t:e.jsx(e.Fragment,{})})()})})]})]})]}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(q){let t=[];for(let s=0;s<A;s++)t.push(e.jsx("div",{children:T},`skeleton-${s}`));return t}else{let t=[],s=e.jsx(G,{});return a.length>0&&a.map((n,o)=>{t.push(e.jsx("div",{children:E(n)},`record_item-${o}`))}),t.length>0?t:s}})()})]}),e.jsxs(oe,{className:"flex justify-between items-center",children:[e.jsx(d,{variant:"outline",className:"",disabled:!$,onClick:()=>{S(!1),v(f+x)},children:"Load more"}),(()=>j>0&&C>0?e.jsx(e.Fragment,{children:e.jsxs("span",{className:"text-sm",children:["Showing ",j," of ",C," entries"]})}):e.jsx(e.Fragment,{}))()]})]})})]})})}export{Se as default};
