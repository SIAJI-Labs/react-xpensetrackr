import{j as t,r as o,e as d,a as F}from"./app-2ff53231.js";import{S as A,T as D}from"./SystemLayout-33ee3dc4.js";import{u as $,B as _}from"./button-6ba3b389.js";import{T as q}from"./TemplateNoData-ff1fe73b.js";import{C as B,b as P,c as U,d as H,a as M,e as z}from"./card-49a77b4f.js";import{S as C}from"./skeleton-8c0cd626.js";/* empty css            */import"./check-03cc35d4.js";import"./index-fe97bc45.js";import"./ApplicationLogo-723b907c.js";/* empty css              */import"./scroll-area-1390c45c.js";import"./theme-toggle-69cdad1e.js";import"./input-0ed7b262.js";import"./ApplicationLogoMask-30723c20.js";function G(){let l=(Math.random()+1).toString(36).substring(7);return t.jsx("section",{children:t.jsxs("div",{className:" flex flex-col gap-2 border rounded p-4",children:[t.jsx(C,{className:"w-[75px] h-[10px] rounded-full"}),t.jsx(C,{className:"w-[120px] h-[20px] rounded-full"})]})},l)}function lt({auth:l,inspire:J=""}){const S=$(),[N,f]=o.useState(!0);o.useEffect(()=>{u()},[]);const[m,p]=o.useState(null),[i,b]=o.useState();let x=5;const[h,E]=o.useState(0),[j,v]=o.useState(0),[c,k]=o.useState(x),[w,g]=o.useState(!1),u=async()=>{f(!0),m instanceof AbortController&&m.abort();const e=new AbortController;p(e);const n=[],r={limit:c};for(const s in r)n.push(encodeURIComponent(s)+"="+encodeURIComponent(r[s]));try{let a=(await d.get(`${route("api.report.notification.v1.list")}?${n.join("&")}`,{cancelToken:new d.CancelToken(function(R){e.abort=R})})).data;b(a.result.data),g(a.result.has_more),E(a.result.data.length),"total"in a.result&&v(a.result.total),f(!1),p(null)}catch(s){d.isCancel(s)?console.log("Request was canceled",s):console.error("Error:",s)}};o.useEffect(()=>{S||u()},[c]);const[L,T]=o.useState(5);let y=()=>t.jsx(G,{});o.useEffect(()=>{i&&T(i.length>0?i.length:3)},[i]);let I=e=>t.jsx(D,{notification:e});return o.useEffect(()=>{const e=()=>{setTimeout(()=>{u()},100)};return document.addEventListener("dialog.notification.hidden",e),document.addEventListener("notification.update",e),()=>{document.removeEventListener("dialog.notification.hidden",e),document.removeEventListener("notification.update",e)}}),t.jsxs(A,{user:l.user,header:t.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Notification"}),children:[t.jsx(F,{title:"Notification"}),t.jsxs(B,{children:[t.jsxs(P,{children:[t.jsx(U,{children:"Notification List"}),t.jsx(H,{children:"See your notification list"})]}),t.jsx(M,{className:" flex flex-col gap-4",children:(()=>{if(N){let e=[];for(let n=0;n<L;n++)e.push(t.jsx("div",{children:y()},`skeleton-${n}`));return e}else{let e=[];if(i&&i.length>0&&i.map((n,r)=>{e.push(t.jsx("div",{children:I(n)},`notification_item-${r}`))}),e.length>0)return e}return t.jsx(q,{})})()}),t.jsxs(z,{className:"flex justify-between items-center",children:[t.jsx(_,{variant:"outline",className:"dark:border-white",disabled:!w,onClick:()=>{g(!1),k(c+x)},children:"Load more"}),(()=>h>0&&j>0?t.jsx(t.Fragment,{children:t.jsxs("span",{className:"text-sm",children:["Showing ",h," of ",j," entries"]})}):t.jsx(t.Fragment,{}))()]})]})]})}export{lt as default};
