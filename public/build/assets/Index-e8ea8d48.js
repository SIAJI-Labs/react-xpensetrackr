import{j as t,r as o,e as d,a as F}from"./app-49e19f09.js";import{S as A,T as D}from"./SystemLayout-a53fff85.js";import{u as $,B as _}from"./button-8f2a595a.js";import{T as q}from"./TemplateNoData-b0444318.js";import{C as B,b as P,c as U,d as H,a as M,e as z}from"./card-2c105230.js";import{S as C}from"./skeleton-3b1a4842.js";/* empty css            */import"./index-961138f1.js";import"./index-61f18b0c.js";import"./index-84c40666.js";import"./dialog-dd6b0ada.js";import"./drawer-134f179f.js";import"./theme-toggle-66897dc1.js";import"./ErrorMessage-9da431ff.js";import"./scroll-area-8438057d.js";import"./input-d9c06e18.js";import"./ApplicationLogoMask-c668ea73.js";import"./ApplicationLogo-c5ad270c.js";/* empty css              */function G(){let l=(Math.random()+1).toString(36).substring(7);return t.jsx("section",{children:t.jsxs("div",{className:" flex flex-col gap-2 border rounded p-4",children:[t.jsx(C,{className:"w-[75px] h-[10px] rounded-full"}),t.jsx(C,{className:"w-[120px] h-[20px] rounded-full"})]})},l)}function ft({auth:l,inspire:J=""}){const S=$(),[N,f]=o.useState(!0);o.useEffect(()=>{u()},[]);const[m,p]=o.useState(null),[i,b]=o.useState();let x=5;const[h,E]=o.useState(0),[j,v]=o.useState(0),[c,k]=o.useState(x),[w,g]=o.useState(!1),u=async()=>{f(!0),m instanceof AbortController&&m.abort();const e=new AbortController;p(e);const n=[],a={limit:c};for(const s in a)n.push(encodeURIComponent(s)+"="+encodeURIComponent(a[s]));try{let r=(await d.get(`${route("api.report.notification.v1.list")}?${n.join("&")}`,{cancelToken:new d.CancelToken(function(R){e.abort=R})})).data;b(r.result.data),g(r.result.has_more),E(r.result.data.length),"total"in r.result&&v(r.result.total),f(!1),p(null)}catch(s){d.isCancel(s)?console.log("Request was canceled",s):console.error("Error:",s)}};o.useEffect(()=>{S||u()},[c]);const[L,T]=o.useState(5);let y=()=>t.jsx(G,{});o.useEffect(()=>{i&&T(i.length>0?i.length:3)},[i]);let I=e=>t.jsx(D,{notification:e});return o.useEffect(()=>{const e=()=>{setTimeout(()=>{u()},100)};return document.addEventListener("dialog.notification.hidden",e),document.addEventListener("notification.update",e),()=>{document.removeEventListener("dialog.notification.hidden",e),document.removeEventListener("notification.update",e)}}),t.jsxs(A,{user:l.user,header:t.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Notification"}),children:[t.jsx(F,{title:"Notification"}),t.jsxs(B,{children:[t.jsxs(P,{children:[t.jsx(U,{children:"Notification List"}),t.jsx(H,{children:"See your notification list"})]}),t.jsx(M,{className:" flex flex-col gap-4",children:(()=>{if(N){let e=[];for(let n=0;n<L;n++)e.push(t.jsx("div",{children:y()},`skeleton-${n}`));return e}else{let e=[];if(i&&i.length>0&&i.map((n,a)=>{e.push(t.jsx("div",{children:I(n)},`notification_item-${a}`))}),e.length>0)return e}return t.jsx(q,{})})()}),t.jsxs(z,{className:"flex justify-between items-center",children:[t.jsx(_,{variant:"outline",className:"dark:border-white",disabled:!w,onClick:()=>{g(!1),k(c+x)},children:"Load more"}),(()=>h>0&&j>0?t.jsx(t.Fragment,{children:t.jsxs("span",{className:"text-sm",children:["Showing ",h," of ",j," entries"]})}):t.jsx(t.Fragment,{}))()]})]})]})}export{ft as default};
