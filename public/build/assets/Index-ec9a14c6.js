import{r as t,e as c,j as e,a as H,d as P}from"./app-c73dabb8.js";import{S as _}from"./SystemLayout-21bd8a52.js";import{b as q,u as M,B as i}from"./button-92a351e5.js";import{R as U}from"./RecordTemplate-9f341915.js";import{S as a,N as z}from"./skeleton-ecd68c20.js";import{C,b,c as v,d as y,a as R,e as O}from"./card-e976dd91.js";import{B as G}from"./badge-1ae7df27.js";import"./Combination-71219a6c.js";import"./ApplicationLogo-e8c8c069.js";import"./ApplicationLogoMask-6b112cd9.js";import"./dropdown-menu-e60c836d.js";import"./textarea-69590a08.js";import"./input-cdd90984.js";const J=q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function oe({auth:p,inspire:S=""}){const j=M();t.useState(!1);const[L,x]=t.useState(!1),[o,g]=t.useState("complete"),[u,m]=t.useState(!0),[k,E]=t.useState(5),[d,I]=t.useState([]),[f,N]=t.useState(null),[w,F]=t.useState(0);let T=e.jsx(e.Fragment,{children:e.jsxs("div",{className:" flex flex-col gap-2 border rounded p-4",children:[e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsx(a,{className:"w-[100px] h-[20px] rounded-full"}),e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(a,{className:"w-[75px] h-[20px] rounded-full"}),e.jsx(a,{className:"w-[10px] h-[20px] rounded-full"})]})]}),e.jsxs("div",{className:" flex flex-row gap-4 items-center",children:[e.jsx("div",{className:"",children:e.jsx(a,{className:"w-[50px] h-[50px] rounded-full"})}),e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx(a,{className:"w-[150px] h-[15px] rounded-full"}),e.jsx(a,{className:"w-[75px] h-[10px] rounded-full"})]})]}),e.jsxs("div",{className:" flex flex-row gap-4",children:[e.jsx(a,{className:"w-[50px] h-[20px] rounded-full"}),e.jsx(a,{className:"w-[50px] h-[20px] rounded-full"}),e.jsx(a,{className:"w-[50px] h-[20px] rounded-full"})]})]})});const D=s=>e.jsx(U,{record:s}),A=async()=>{x(!0),f instanceof AbortController&&f.abort();const s=new AbortController;N(s),m(!0);const r=[],n={limit:10,filter_status:o};for(const l in n)r.push(encodeURIComponent(l)+"="+encodeURIComponent(n[l]));try{let $=(await c.get(`${route("api.record.v1.list")}?${r.join("&")}`,{cancelToken:new c.CancelToken(function(B){s.abort=B})})).data;I($.result.data),m(!1),x(!1),N(null)}catch(l){c.isCancel(l)?console.log("Request was canceled",l):console.error("Error:",l)}};t.useEffect(()=>{j||h()},[o]),t.useEffect(()=>{E(d.length>0?d.length:3)},[d]);const h=async()=>{var s;x(!0);try{let n=(await c.get(route("api.record.v1.count-pending"))).data;F((s=n==null?void 0:n.result)==null?void 0:s.data),x(!1),A()}catch(r){c.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}};return t.useEffect(()=>{console.log("On load"),h()},[]),t.useEffect(()=>{if(!j){console.log("Handle record dialog");const s=r=>{setTimeout(()=>{h()},100)};return document.addEventListener("dialog.record.hidden",s),()=>{document.removeEventListener("dialog.record.hidden",s)}}}),e.jsxs(_,{user:p.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e.jsx(H,{title:"Dashboard"}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(C,{className:"",children:[e.jsx(b,{className:"",children:e.jsxs("div",{className:"flex flex-col space-y-2 ",children:[e.jsxs(v,{children:[e.jsx("span",{className:" font-light",children:"Hi"})," ",e.jsx("span",{className:" font-semibold",children:p.user.name}),","]}),e.jsx(y,{children:"how's doing? ðŸ‘‹"})]})}),e.jsx(R,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:S},className:" p-4 rounded-lg bg-gray-100 dark:bg-background dark:border"})})]}),e.jsxs(C,{className:" w-full",children:[e.jsx(b,{children:e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(v,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(y,{children:"See your latest transaction"})]}),(()=>L?e.jsx(i,{disabled:!0,children:e.jsx(J,{className:"h-4 w-4 animate-spin"})}):e.jsx(i,{variant:"outline",onClick:()=>{f instanceof AbortController&&f.abort(),h()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}))()]})}),e.jsxs(R,{className:" flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-4",id:"dashboard-recordList",children:[e.jsx(i,{variant:o==="complete"?"default":"outline",onClick:()=>{o!=="complete"&&(g("complete"),m(!u))},className:" ",children:"Complete"}),e.jsxs(i,{variant:o==="pending"?"default":"outline",onClick:()=>{o!=="pending"&&(g("pending"),m(!u))},className:" flex flex-row gap-1 ",children:[e.jsx("span",{children:"Pending"}),(()=>w>0?e.jsx(e.Fragment,{children:e.jsx(G,{className:`${o==="pending"?" bg-white text-primary":null} leading-none p-0 h-4 w-4 flex items-center justify-center`,children:w})}):e.jsx(e.Fragment,{}))()]})]}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(u){let s=[];for(let r=0;r<k;r++)s.push(e.jsx("div",{children:T},`skeleton-${r}`));return s}else{let s=[],r=e.jsx(z,{});return d.length>0&&d.map((n,l)=>{s.push(e.jsx("div",{children:D(n)},`record_item-${l}`))}),s.length>0?s:r}})()})]}),(()=>u?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(O,{children:e.jsx(P,{href:route("sys.record.index"),children:e.jsx(i,{variant:"outline",className:"",children:"Load all"})})})}))()]})]})]})}export{oe as default};
