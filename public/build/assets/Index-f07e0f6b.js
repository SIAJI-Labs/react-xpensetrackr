import{r as t,e as d,j as e,a as P}from"./app-17d73614.js";import{S as _}from"./SystemLayout-89675fa8.js";import{S as l,R as q,N as H}from"./skeleton-0c359982.js";import{C as w,b,c as C,d as v,a as R,e as M}from"./card-ca01e443.js";import{B as i}from"./button-3f373d9f.js";import{B as U}from"./badge-23ba6077.js";import{c as z}from"./textarea-1abc0be6.js";import"./index-d0f2d8d6.js";/* empty css              */const O=z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function re({auth:p,inspire:k=""}){const[G,y]=t.useState(!1),[L,x]=t.useState(!1),[o,j]=t.useState("complete"),[u,f]=t.useState(!0),[S,E]=t.useState(5),[c,I]=t.useState([]),[m,g]=t.useState(null),[N,T]=t.useState(0);let D=e.jsx(e.Fragment,{children:e.jsxs("div",{className:" flex flex-col gap-2 border rounded p-4",children:[e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsx(l,{className:"w-[100px] h-[20px] rounded-full"}),e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx(l,{className:"w-[75px] h-[20px] rounded-full"}),e.jsx(l,{className:"w-[10px] h-[20px] rounded-full"})]})]}),e.jsxs("div",{className:" flex flex-row gap-4 items-center",children:[e.jsx("div",{className:"",children:e.jsx(l,{className:"w-[50px] h-[50px] rounded-full"})}),e.jsxs("div",{className:" flex flex-col gap-2",children:[e.jsx(l,{className:"w-[150px] h-[15px] rounded-full"}),e.jsx(l,{className:"w-[75px] h-[10px] rounded-full"})]})]}),e.jsxs("div",{className:" flex flex-row gap-4",children:[e.jsx(l,{className:"w-[50px] h-[20px] rounded-full"}),e.jsx(l,{className:"w-[50px] h-[20px] rounded-full"}),e.jsx(l,{className:"w-[50px] h-[20px] rounded-full"})]})]})});const F=s=>e.jsx(q,{record:s}),A=async()=>{x(!0),m instanceof AbortController&&m.abort();const s=new AbortController;g(s),f(!0);const r=[],n={limit:10,filter_status:o};for(const a in n)r.push(encodeURIComponent(a)+"="+encodeURIComponent(n[a]));try{let $=(await d.get(`${route("api.record.v1.list")}?${r.join("&")}`,{cancelToken:new d.CancelToken(function(B){s.abort=B})})).data;I($.result.data),f(!1),x(!1),g(null)}catch(a){d.isCancel(a)?console.log("Request was canceled",a):console.error("Error:",a)}};t.useEffect(()=>{h()},[o]),t.useEffect(()=>{E(c.length>0?c.length:3)},[c]);const h=async()=>{var s;x(!0);try{let n=(await d.get(route("api.record.v1.count-pending"))).data;T((s=n==null?void 0:n.result)==null?void 0:s.data),x(!1),A()}catch(r){d.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}};return t.useEffect(()=>{h();const s=()=>{setTimeout(()=>{h(),y(!1)},100)};return window.addEventListener("dialogRecord",s),()=>{window.removeEventListener("dialogRecord",s)}},[]),e.jsxs(_,{user:p.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e.jsx(P,{title:"Dashboard"}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(w,{className:"",children:[e.jsx(b,{className:"",children:e.jsxs("div",{className:"flex flex-col space-y-2 ",children:[e.jsxs(C,{children:[e.jsx("span",{className:" font-light",children:"Hi"})," ",e.jsx("span",{className:" font-semibold",children:p.user.name}),","]}),e.jsx(v,{children:"how's doing? ðŸ‘‹"})]})}),e.jsx(R,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:k},className:" p-4 rounded-lg bg-gray-100 dark:bg-background dark:border"})})]}),e.jsxs(w,{className:" w-full",children:[e.jsx(b,{children:e.jsxs("div",{className:" flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(C,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(v,{children:"See your latest transaction"})]}),(()=>L?e.jsx(i,{disabled:!0,children:e.jsx(O,{className:"h-4 w-4 animate-spin"})}):e.jsx(i,{variant:"outline",onClick:()=>{m instanceof AbortController&&m.abort(),h()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})}))()]})}),e.jsxs(R,{className:" flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-4",id:"dashboard-recordList",children:[e.jsx(i,{variant:o==="complete"?"default":"outline",onClick:()=>{o!=="complete"&&(j("complete"),f(!u))},className:" dark:border-white",children:"Complete"}),e.jsxs(i,{variant:o==="pending"?"default":"outline",onClick:()=>{o!=="pending"&&(j("pending"),f(!u))},className:" flex flex-row gap-1 dark:border-white",children:[e.jsx("span",{children:"Pending"}),(()=>N>0?e.jsx(e.Fragment,{children:e.jsx(U,{className:`${o==="pending"?" bg-white text-primary":null} leading-none p-0 h-4 w-4 flex items-center justify-center`,children:N})}):e.jsx(e.Fragment,{}))()]})]}),e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(u){let s=[];for(let r=0;r<S;r++)s.push(e.jsx("div",{children:D},`skeleton-${r}`));return s}else{let s=[],r=e.jsx(H,{});return c.length>0&&c.map((n,a)=>{s.push(e.jsx("div",{children:F(n)},`record_item-${a}`))}),s.length>0?s:r}})()})]}),(()=>u?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx(M,{children:e.jsx(i,{variant:"outline",className:"dark:border-white",children:"Load more"})})}))()]})]})]})}export{re as default};
