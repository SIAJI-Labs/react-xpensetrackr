import{r as n,e as m,j as t}from"./app-6cb53278.js";import{u as T,B as j}from"./button-6143d3b2.js";import{L as R}from"./ListTemplate-6322efcb.js";import{N as L}from"./skeleton-e9e85622.js";import{I as N}from"./input-1e39ecbe.js";import{S as F}from"./SummarySkeleton-d6331920.js";import"./Combination-c7e1ca80.js";import"./dropdown-menu-2ecb51c9.js";function J({auth:A,activeType:$}){const P=T();n.useEffect(()=>{c()},[]);const[u,p]=n.useState(null),[S,f]=n.useState(!0),[o,y]=n.useState();let r=5;const[i,h]=n.useState(r),[C,x]=n.useState(!1),c=async()=>{f(!0),u instanceof AbortController&&u.abort();const e=new AbortController;p(e);const s=[],l={limit:i,keyword:d};for(const a in l)s.push(encodeURIComponent(a)+"="+encodeURIComponent(l[a]));try{let g=(await m.get(`${route("api.planned-payment.v1.list")}?${s.join("&")}`,{cancelToken:new m.CancelToken(function(E){e.abort=E})})).data;y(g.result.data),x(g.result.has_more),f(!1),p(null)}catch(a){m.isCancel(a)?console.log("Request was canceled",a):console.error("Error:",a)}},[b,k]=n.useState(5);let I=()=>t.jsx(F,{}),v=e=>t.jsx(R,{plannedPayment:e});n.useEffect(()=>{o&&k(o.length>0?o.length:3)},[o]);const[d,w]=n.useState("");return n.useEffect(()=>{const e=setTimeout(()=>{h(r),c()},500);return()=>{clearTimeout(e)}},[d]),n.useEffect(()=>{P||c()},[i]),t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:" flex flex-row gap-4",children:[t.jsx(N,{placeholder:"Search by Planned Payment name",value:d,onChange:e=>{w(e.target.value)}}),t.jsx(j,{children:t.jsx("i",{className:"fa-solid fa-filter"})})]}),(()=>{if(S){let e=[];for(let s=0;s<b;s++)e.push(t.jsx("div",{children:I()},`skeleton-${s}`));return e}else{let e=[],s=t.jsx(L,{});return o&&o.length>0&&o.map((l,a)=>{e.push(t.jsx("div",{children:v(l)},`planned_item-${a}`))}),e.length>0?e:s}})(),t.jsx("div",{children:t.jsx(j,{variant:"outline",className:"dark:border-white",disabled:!C,onClick:()=>{x(!1),h(i+r)},children:"Load more"})})]})})}export{J as default};
