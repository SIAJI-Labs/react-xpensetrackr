import{r as i,e as p,j as e,a as z,y as g}from"./app-49e19f09.js";import{u as G,B as j}from"./button-8f2a595a.js";import{S as J}from"./SystemLayout-a53fff85.js";import{T as K}from"./TemplateBackButton-a1494aed.js";import{D as Q,a as X,b as Z,c as d,T as R}from"./TemplateNoData-b0444318.js";import{T as ee}from"./TemplateList-571b9c60.js";import{T as te,S as se}from"./SkeletonList-5b4d3cbf.js";import{f as ne,h as m}from"./index-961138f1.js";import{C as w,b as v,c as E,d as L,a as S,e as le}from"./card-2c105230.js";import{B as C}from"./badge-dbdf798f.js";/* empty css            */import"./index-84c40666.js";import"./dialog-dd6b0ada.js";import"./index-61f18b0c.js";import"./drawer-134f179f.js";import"./theme-toggle-66897dc1.js";import"./ErrorMessage-9da431ff.js";import"./scroll-area-8438057d.js";import"./input-d9c06e18.js";import"./ApplicationLogoMask-c668ea73.js";import"./ApplicationLogo-c5ad270c.js";/* empty css              */import"./skeleton-3b1a4842.js";function De({auth:k,data:t}){const M=G(),[I,f]=i.useState(!1);i.useEffect(()=>{const s=()=>{setTimeout(()=>{f(!1)},100)};return document.addEventListener("dialog.wallet-share.shown",s),()=>{document.removeEventListener("dialog.wallet-share.shown",s)}});const[a,$]=i.useState([]);i.useEffect(()=>{$(t.wallet_share_item)},[t]),i.useEffect(()=>{const s=n=>{var l,r;console.log(n),(l=n.detail)!=null&&l.action&&n.type==="wallet-share.deleted-action"&&((r=n.detail)==null?void 0:r.action)==="delete"?g.visit(route("sys.wallet-share.index")):g.reload({only:["data"]})};return document.addEventListener("dialog.wallet.hidden",s),document.addEventListener("dialog.wallet.balance-adjustment.hidden",s),document.addEventListener("wallet.deleted-action",s),document.addEventListener("dialog.wallet-share.hidden",s),document.addEventListener("wallet-share.deleted-action",s),document.addEventListener("record.deleted-action",s),document.addEventListener("dialog.record.hidden",s),()=>{document.removeEventListener("dialog.wallet.hidden",s),document.removeEventListener("dialog.wallet.balance-adjustment.hidden",s),document.removeEventListener("wallet.deleted-action",s),document.removeEventListener("dialog.wallet-share.hidden",s),document.removeEventListener("wallet-share.deleted-action",s),document.removeEventListener("record.deleted-action",s),document.removeEventListener("dialog.record.hidden",s)}});const B=s=>e.jsx(te,{record:s});let Y=e.jsx(se,{}),N=5;const[b,F]=i.useState(0),[T,H]=i.useState(0),[x,A]=i.useState(N),[O,_]=i.useState(!1);i.useEffect(()=>{h()},[x]);const[P,D]=i.useState(!0),[U,q]=i.useState(5),[c,W]=i.useState([]),[u,y]=i.useState(null);i.useEffect(()=>{q(c.length>0?c.length:3)},[c]);const h=async()=>{u instanceof AbortController&&u.abort();const s=new AbortController;y(s),D(!0);const n=[],l={limit:x};for(const r in l)n.push(encodeURIComponent(r)+"="+encodeURIComponent(l[r]));a&&(a==null?void 0:a.length)>0?a.forEach((r,o)=>{n.push(encodeURIComponent(`filter_wallet[${o}]`)+"="+encodeURIComponent(r.uuid))}):n.push(encodeURIComponent("filter_wallet[]")+"=-1");try{let o=(await p.get(`${route("api.record.v1.list")}?${n.join("&")}`,{cancelToken:new p.CancelToken(function(V){s.abort=V})})).data;W(o.result.data),_(o.result.has_more),F(o.result.data.length),"total"in o.result&&H(o.result.total),D(!1),y(null)}catch(r){p.isCancel(r)?console.log("Request was canceled",r):console.error("Error:",r)}};return i.useEffect(()=>{M||h()},[a]),i.useEffect(()=>{const s=()=>{setTimeout(()=>{h()},100)};return document.addEventListener("dialog.record.hidden",s),document.addEventListener("record.deleted-action",s),()=>{document.removeEventListener("dialog.record.hidden",s),document.removeEventListener("record.deleted-action",s)}}),e.jsx(e.Fragment,{children:e.jsxs(J,{user:k.user,header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["Wallet Share Detail: ",`${t==null?void 0:t.name}`]}),children:[e.jsx(z,{title:`Wallet Share: ${t==null?void 0:t.name}`}),e.jsx(K,{className:"px-0"}),e.jsxs("div",{className:" flex flex-col gap-6",children:[e.jsxs(w,{className:" w-full",children:[e.jsx(v,{children:e.jsxs("div",{className:" relative flex flex-row justify-between items-start gap-4",children:[e.jsxs("div",{children:[e.jsx(E,{children:e.jsxs("div",{children:["Wallet Share Detail: ",`${t==null?void 0:t.name}`]})}),e.jsxs(L,{children:["See summary of ",e.jsx("u",{children:`${t==null?void 0:t.name}`})," wallet share"]})]}),e.jsx("div",{children:e.jsxs(Q,{open:I,onOpenChange:f,children:[e.jsx(X,{asChild:!0,children:e.jsx(j,{variant:"link",className:" p-0 h-auto leading-none dark:!text-white !text-black","data-type":"dropdown-trigger",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})})}),e.jsxs(Z,{sideOffset:5,alignOffset:0,side:"left",align:"start",children:[e.jsx(d,{className:" cursor-pointer",onClick:()=>{g.reload(),setTimeout(()=>{f(!1)},100)},children:e.jsx("span",{className:"",children:"Refresh"})}),(()=>document.getElementById("walletShare-dialogShareSection")?e.jsx(d,{className:" cursor-pointer",onClick:n=>{let l=n.target;if(l){let r=l.innerHTML;l.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const o=()=>{r&&(l.innerHTML=r),document.removeEventListener("dialog.wallet-share.prompt-shown",o)};document.addEventListener("dialog.wallet-share.prompt-shown",o)}document.dispatchEvent(new CustomEvent("wallet-share.share-prompt",{bubbles:!0,detail:{uuid:t&&"uuid"in t?t==null?void 0:t.uuid:""}}))},children:e.jsx("span",{className:" ",children:"Share"})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("walletShare-dialogSection")?e.jsx(d,{className:" cursor-pointer",onClick:n=>{let l=n.target;if(l){let r=l.innerHTML;l.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const o=()=>{r&&(l.innerHTML=r),document.removeEventListener("dialog.wallet.shown",o)};document.addEventListener("dialog.wallet.shown",o)}document.dispatchEvent(new CustomEvent("wallet-share.edit-action",{bubbles:!0,detail:{uuid:t&&"uuid"in t?t==null?void 0:t.uuid:""}}))},children:e.jsx("span",{className:" text-yellow-500",children:"Edit"})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("walletShareBalanceAdjustment-dialogSection")?e.jsx(d,{className:" cursor-pointer",onClick:n=>{let l=n.target;if(l){let r=l.innerHTML;l.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const o=()=>{r&&(l.innerHTML=r),document.removeEventListener("dialog.wallet-share.balance-adjustment.shown",o)};document.addEventListener("dialog.wallet-share.balance-adjustment.shown",o)}document.dispatchEvent(new CustomEvent("wallet-share.balance-adjustment.edit-action",{bubbles:!0,detail:{uuid:t&&"uuid"in t?t==null?void 0:t.uuid:""}}))},children:e.jsx("span",{className:" text-yellow-500",children:"Balance Adjustment"})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("walletShare-deleteDialogSection")?e.jsx(d,{className:" cursor-pointer",onClick:()=>{document.dispatchEvent(new CustomEvent("wallet-share.delete-action",{bubbles:!0,detail:{uuid:t&&"uuid"in t?t==null?void 0:t.uuid:null,action:"delete"}}))},children:e.jsx("span",{className:" text-red-500",children:"Delete"})}):e.jsx(e.Fragment,{}))()]})]})})]})}),e.jsx(S,{children:e.jsxs("div",{className:" flex flex-col gap-4",children:[e.jsx("div",{className:" flex flex-row justify-between",children:e.jsxs("div",{className:" flex flex-col",children:[e.jsx("span",{children:"Balance"}),e.jsx("span",{className:"font-semibold",children:ne(t.balance??0)})]})}),(()=>{var n;let s=[];return t.passphrase&&s.push(e.jsxs(C,{className:" flex flex-row gap-1",children:[e.jsx("i",{className:"fa-solid fa-lock"}),e.jsx("span",{children:"Passphrase"})]},`items_passphrase-${t.uuid}`)),t.valid_until&&s.push(e.jsxs(C,{variant:m(m(t.valid_until).format("YYYY-MM-DD"))<m(m().format("YYYY-MM-DD"))?"destructive":"default",className:" flex flex-row gap-1",children:[e.jsx("i",{className:"fa-solid fa-clock"}),e.jsxs("span",{children:["Valid until: ",m(t.valid_until).format("Do MMM, YYYY")]})]},`items_deadline-${t.uuid}`)),t.wallet_share_item&&((n=t.wallet_share_item)==null?void 0:n.length)>0&&s.push(e.jsxs(C,{className:" flex flex-row gap-1",children:[e.jsx("i",{className:"fa-solid fa-wallet"}),e.jsxs("span",{children:[t.wallet_share_item.length," item",t.wallet_share_item.length>1?"s":""," of wallet"]})]},`items_wallet-${t.uuid}`)),s.length>0?e.jsx("div",{className:" flex flex-row gap-2 items-center flex-wrap",children:s}):e.jsx(e.Fragment,{})})()]})})]}),e.jsxs(w,{className:" w-full",children:[e.jsx(v,{children:e.jsx("div",{className:" relative flex flex-row justify-between items-start",children:e.jsxs("div",{children:[e.jsx(E,{children:e.jsx("div",{children:"List of Item"})}),e.jsx(L,{children:"See the list of wallet share"})]})})}),e.jsx(S,{children:(()=>{var s;if("wallet_share_item"in t&&t.wallet_share_item&&((s=t.wallet_share_item)==null?void 0:s.length)>0){let n=[];if(t.wallet_share_item.forEach(l=>{n.push(e.jsx(ee,{wallet:l},`share_item-${l.uuid}`))}),n.length>0)return e.jsx("div",{className:" flex flex-col gap-4",children:n})}return e.jsx(R,{})})()})]}),e.jsxs(w,{className:"",children:[e.jsx(v,{children:e.jsxs("div",{className:" flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(E,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(L,{children:"See your latest transaction"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(j,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{u instanceof AbortController&&u.abort(),h()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})})})]})}),e.jsx(S,{className:" flex flex-col gap-6",children:e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(P){let s=[];for(let n=0;n<U;n++)s.push(e.jsx("div",{children:Y},`skeleton-${n}`));return s}else{let s=[],n=e.jsx(R,{});return c.length>0&&c.map((l,r)=>{s.push(e.jsx("div",{children:B(l)},`record_item-${r}`))}),s.length>0?s:n}})()})}),e.jsxs(le,{className:"flex justify-between items-center",children:[e.jsx(j,{variant:"outline",className:"",disabled:!O,onClick:()=>{_(!1),A(x+N)},children:"Load more"}),(()=>b>0&&T>0?e.jsx(e.Fragment,{children:e.jsxs("span",{className:"text-sm",children:["Showing ",b," of ",T," entries"]})}):e.jsx(e.Fragment,{}))()]})]})]})]})})}export{De as default};
