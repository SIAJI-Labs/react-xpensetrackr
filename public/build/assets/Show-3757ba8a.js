import{r as o,j as e,a as v,y as a,d as N}from"./app-49e19f09.js";import{m}from"./index-961138f1.js";import{T as w}from"./TemplateBackButton-a1494aed.js";import{T as b}from"./TemplateList-803b4e08.js";import{D as E,a as D,b as C,c,T}from"./TemplateNoData-b0444318.js";import{S as L}from"./SystemLayout-a53fff85.js";import{C as x,b as u,c as h,d as p,a as f}from"./card-2c105230.js";import{B as M}from"./button-8f2a595a.js";/* empty css            */import"./index-61f18b0c.js";/* empty css              */import"./index-84c40666.js";import"./dialog-dd6b0ada.js";import"./drawer-134f179f.js";import"./theme-toggle-66897dc1.js";import"./ErrorMessage-9da431ff.js";import"./scroll-area-8438057d.js";import"./input-d9c06e18.js";import"./ApplicationLogoMask-c668ea73.js";import"./ApplicationLogo-c5ad270c.js";function V({auth:g,data:s}){const[j,i]=o.useState(!1);o.useEffect(()=>{const n=()=>{setTimeout(()=>{i(!1)},100)};return document.addEventListener("dialog.category.shown",n),()=>{document.removeEventListener("dialog.category.shown",n)}});let y=n=>e.jsx(b,{category:n});return o.useEffect(()=>{const n=l=>{var t,r;(t=l.detail)!=null&&t.action&&((r=l.detail)==null?void 0:r.action)==="delete"?a.visit(route("sys.category.index")):a.reload()};return document.addEventListener("category.deleted-action",n),document.addEventListener("dialog.category.hidden",n),()=>{document.addEventListener("category.deleted-action",n),document.removeEventListener("dialog.category.hidden",n)}}),e.jsx(e.Fragment,{children:e.jsxs(L,{user:g.user,header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["Category Detail: ",`${s.parent?`${s.parent.name} - `:""}${s==null?void 0:s.name}`]}),fabAction:["category"],children:[e.jsx(v,{title:`Category: ${s.parent?`${s.parent.name} - `:""}${s==null?void 0:s.name}`}),e.jsx(w,{className:"px-0"}),e.jsxs(x,{className:" w-full",children:[e.jsx(u,{children:e.jsxs("div",{className:" relative flex flex-row gap-4 justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(h,{children:e.jsxs("div",{children:["Category Detail: ",`${s.parent?`${s.parent.name} - `:""}${s==null?void 0:s.name}`]})}),e.jsxs(p,{children:["See summary of ",e.jsx("u",{children:`${s.parent?`${s.parent.name} - `:""}${s==null?void 0:s.name}`})," category"]})]}),e.jsx("div",{children:e.jsxs(E,{open:j,onOpenChange:i,children:[e.jsx(D,{asChild:!0,children:e.jsx(M,{variant:"link",className:" p-0 h-auto leading-none dark:!text-white !text-black","data-type":"dropdown-trigger",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})})}),e.jsxs(C,{sideOffset:5,alignOffset:0,side:"left",align:"start",children:[e.jsx(c,{className:" cursor-pointer",onClick:()=>{a.reload(),setTimeout(()=>{i(!1)},100)},children:e.jsx("span",{className:"",children:"Refresh"})}),(()=>document.getElementById("category-dialogSection")?e.jsx(c,{className:" cursor-pointer",onClick:l=>{let t=l.target;if(t){let r=t.innerHTML;t.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const d=()=>{r&&(t.innerHTML=r),document.removeEventListener("dialog.category.shown",d)};document.addEventListener("dialog.category.shown",d)}document.dispatchEvent(new CustomEvent("category.edit-action",{bubbles:!0,detail:{uuid:s&&"uuid"in s?s==null?void 0:s.uuid:""}}))},children:e.jsx("span",{className:" text-yellow-500",children:"Edit"})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("category-deleteDialogSection")?e.jsx(c,{className:" cursor-pointer",onClick:()=>{document.dispatchEvent(new CustomEvent("category.delete-action",{bubbles:!0,detail:{uuid:s&&"uuid"in s?s==null?void 0:s.uuid:null,action:"delete"}}))},children:e.jsx("span",{className:" text-red-500",children:"Delete"})}):e.jsx(e.Fragment,{}))()]})]})})]})}),e.jsx(f,{children:e.jsxs("div",{className:" flex flex-col gap-4",children:[(()=>s.parent&&s.parent.deleted_at!==null?e.jsx(e.Fragment,{children:e.jsxs("div",{className:" w-full p-4 rounded-lg border-2 border-dashed",children:[e.jsxs("span",{className:" flex items-center gap-2 text-sm font-normal",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),e.jsx("span",{className:"font-normal",children:"Parent Category is Deleted"})]}),e.jsxs("span",{className:" block mt-2",children:["Parent Category is deleted at ",m("MMM Do, YYYY / HH:mm",s.parent.deleted_at)]})]})}):"deleted_at"in s&&s.deleted_at!==null?e.jsx(e.Fragment,{children:e.jsxs("div",{className:" w-full p-4 rounded-lg border-2 border-dashed",children:[e.jsxs("span",{className:" flex items-center gap-2 text-sm font-normal",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),e.jsx("span",{className:"font-normal",children:"Data is Deleted"})]}),e.jsxs("span",{className:" block mt-2",children:["Related data is deleted at ",m("MMM Do, YYYY / HH:mm",s.deleted_at)]})]})}):e.jsx(e.Fragment,{}))(),e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsx("div",{className:" flex flex-row justify-between",children:e.jsxs("div",{className:" flex flex-col",children:[e.jsx("span",{children:"Related to"}),(()=>s.parent?e.jsx(N,{href:route("sys.category.show",s.parent.uuid),children:e.jsx("span",{className:"font-semibold underline",children:s.parent.name})}):e.jsx(e.Fragment,{children:"-"}))()]})}),e.jsxs("div",{className:" flex flex-col items-end",children:[e.jsx("span",{children:"Last Transaction"}),e.jsx("span",{children:"-"})]})]})]})})]}),(()=>s.child&&Object.keys(s.child).length>0?e.jsx(e.Fragment,{children:e.jsxs(x,{className:" w-full mt-6",children:[e.jsx(u,{children:e.jsx("div",{className:" relative flex flex-row justify-between items-start",children:e.jsxs("div",{children:[e.jsx(h,{children:e.jsx("div",{className:" text-base",children:"Related category"})}),(()=>s.child?e.jsxs(p,{children:["There's ",s.child.length," item(s) related to ",e.jsx("u",{children:s.name})]}):e.jsx(e.Fragment,{}))()]})})}),e.jsx(f,{children:e.jsx("div",{className:"flex flex-col gap-4",children:(()=>{let n=[],l=e.jsx(T,{});return Object.values(s.child).forEach((t,r)=>{n.push(e.jsx("div",{children:y(t)},`related_item-${r}`))}),n.length>0?n:l})()})})]})}):e.jsx(e.Fragment,{}))()]})})}export{V as default};
