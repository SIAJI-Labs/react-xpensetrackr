import{r as d,j as e,a as v,y as m,d as N}from"./app-1f411076.js";import{u as b,B as E}from"./button-6bff8746.js";import{T as D}from"./TemplateBackButton-c90373ce.js";import{T}from"./TemplateList-b3f40d01.js";import{D as y,a as L,b as C,c as a,T as M}from"./TemplateNoData-b16f2c69.js";import{S}from"./SystemLayout-28addeb2.js";import{m as x,f as F,u as $}from"./function-ee4152ee.js";import{C as u,b as p,c as h,d as B,a as f}from"./card-4d0bba92.js";import{B as k}from"./badge-9d0dcdd3.js";/* empty css            */import"./ApplicationLogo-9811e763.js";import"./textarea-ba532bb9.js";import"./ApplicationLogoMask-36c74623.js";import"./input-7447fc1d.js";function Q({auth:j,data:l,related:o}){b();const[g,c]=d.useState(!1);let w=n=>e.jsx(T,{wallet:n});return d.useEffect(()=>{const n=i=>{var s,t;(s=i.detail)!=null&&s.action&&((t=i.detail)==null?void 0:t.action)==="delete"?location.href=route("sys.wallet.index"):m.reload()};return document.addEventListener("dialog.wallet.hidden",n),document.addEventListener("dialog.wallet.balance-adjustment.hidden",n),()=>{document.removeEventListener("dialog.wallet.hidden",n),document.removeEventListener("dialog.wallet.balance-adjustment.hidden",n)}}),e.jsx(e.Fragment,{children:e.jsxs(S,{user:j.user,header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["Wallet Detail: ",`${l!=null&&l.parent?`${l.parent.name} - `:""}${l==null?void 0:l.name}`]}),children:[e.jsx(v,{title:`Wallet: ${l!=null&&l.parent?`${l.parent.name} - `:""}${l==null?void 0:l.name}`}),e.jsx("div",{className:"flex flex-col gap-6",children:e.jsx(D,{className:"px-0"})}),e.jsxs(u,{className:" w-full",children:[e.jsx(p,{children:e.jsxs("div",{className:" relative flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(h,{children:e.jsxs("div",{children:["Wallet Detail: ",`${l!=null&&l.parent?`${l.parent.name} - `:""}${l==null?void 0:l.name}`]})}),e.jsxs(B,{children:["See summary of ",e.jsx("u",{children:`${l!=null&&l.parent?`${l.parent.name} - `:""}${l==null?void 0:l.name}`})," wallet"]})]}),e.jsx("div",{children:e.jsxs(y,{open:g,onOpenChange:c,children:[e.jsx(L,{asChild:!0,children:e.jsx(E,{variant:"link",className:" p-0 h-auto leading-none dark:!text-white !text-black","data-type":"dropdown-trigger",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})})}),e.jsxs(C,{sideOffset:5,alignOffset:0,side:"left",align:"start",children:[e.jsx(a,{className:" cursor-pointer",onClick:()=>{m.reload(),setTimeout(()=>{c(!1)},100)},children:e.jsx("span",{className:"",children:"Refresh"})}),(()=>document.getElementById("wallet-dialogSection")?e.jsx(a,{className:" cursor-pointer",onClick:i=>{let s=i.target;if(s){let t=s.innerHTML;s.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const r=()=>{t&&(s.innerHTML=t),document.removeEventListener("dialog.wallet.shown",r)};document.addEventListener("dialog.wallet.shown",r)}document.dispatchEvent(new CustomEvent("wallet.edit-action",{bubbles:!0,detail:{uuid:l&&"uuid"in l?l==null?void 0:l.uuid:""}}))},children:e.jsx("span",{className:" text-yellow-500",children:"Edit"})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("walletBalanceAdjustment-dialogSection")?e.jsx(a,{className:" cursor-pointer",onClick:i=>{let s=i.target;if(s){let t=s.innerHTML;s.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const r=()=>{t&&(s.innerHTML=t),document.removeEventListener("dialog.wallet.balance-adjustment.shown",r)};document.addEventListener("dialog.wallet.balance-adjustment.shown",r)}document.dispatchEvent(new CustomEvent("wallet.balance-adjustment.edit-action",{bubbles:!0,detail:{uuid:l&&"uuid"in l?l==null?void 0:l.uuid:""}}))},children:e.jsx("span",{className:" text-yellow-500",children:"Balance Adjustment"})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("wallet-deleteDialogSection")?e.jsx(a,{className:" cursor-pointer",onClick:()=>{document.dispatchEvent(new CustomEvent("wallet.delete-action",{bubbles:!0,detail:{uuid:l&&"uuid"in l?l==null?void 0:l.uuid:null,action:"delete"}}))},children:e.jsx("span",{className:" text-red-500",children:"Delete"})}):e.jsx(e.Fragment,{}))()]})]})})]})}),e.jsx(f,{children:e.jsxs("div",{className:" flex flex-col gap-4",children:[(()=>l.parent&&l.parent.deleted_at!==null?e.jsx(e.Fragment,{children:e.jsxs("div",{className:" w-full p-4 rounded-lg border-2 border-dashed",children:[e.jsxs("span",{className:" flex items-center gap-2 text-sm font-normal",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),e.jsx("span",{className:"font-normal",children:"Parent Wallet is Deleted"})]}),e.jsxs("span",{className:" block mt-2",children:["Parent Wallet is deleted at ",x("MMM Do, YYYY / HH:mm",l.parent.deleted_at)]})]})}):"deleted_at"in l&&l.deleted_at!==null?e.jsx(e.Fragment,{children:e.jsxs("div",{className:" w-full p-4 rounded-lg border-2 border-dashed",children:[e.jsxs("span",{className:" flex items-center gap-2 text-sm font-normal",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),e.jsx("span",{className:"font-normal",children:"Data is Deleted"})]}),e.jsxs("span",{className:" block mt-2",children:["Related data is deleted at ",x("MMM Do, YYYY / HH:mm",l.deleted_at)]})]})}):e.jsx(e.Fragment,{}))(),e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsxs("div",{className:" flex flex-col",children:[e.jsx("span",{children:"Balance"}),e.jsx("span",{className:"font-semibold",children:F(l.balance??0)})]}),(()=>l.parent_id?e.jsx(e.Fragment,{children:e.jsxs("div",{className:" flex flex-col items-end",children:[e.jsx("span",{children:"Related to"}),e.jsx(N,{href:route("sys.wallet.show",l.parent.uuid),children:e.jsx("span",{className:"font-semibold underline",children:l.parent.name})})]})}):e.jsx(e.Fragment,{}))()]}),e.jsxs("div",{className:" flex flex-row justify-between",children:[e.jsxs("div",{className:" flex flex-col",children:[e.jsx("span",{children:"Purpose"}),e.jsx(k,{children:$(l.type)})]}),e.jsxs("div",{className:" flex flex-col items-end",children:[e.jsx("span",{children:"Last Transaction"}),e.jsx("span",{children:"-"})]})]})]})})]}),(()=>o&&Object.keys(o).length>0?e.jsx(e.Fragment,{children:e.jsxs(u,{className:" w-full mt-6",children:[e.jsx(p,{children:e.jsx("div",{className:" relative flex flex-row justify-between items-start",children:e.jsx("div",{children:e.jsx(h,{children:e.jsx("div",{className:" text-base",children:"Related wallet"})})})})}),e.jsx(f,{children:e.jsx("div",{className:"flex flex-col gap-4",children:(()=>{let n=[],i=e.jsx(M,{});return Object.values(o).forEach((s,t)=>{console.log(s),n.push(e.jsx("div",{children:w(s)},`related_item-${t}`))}),n.length>0?n:i})()})})]})}):e.jsx(e.Fragment,{}))()]})})}export{Q as default};
