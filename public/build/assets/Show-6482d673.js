import{r as o,j as e,a as w,y as c,d as l}from"./app-49e19f09.js";import{T as N}from"./TemplateBackButton-a1494aed.js";import{S as v}from"./SystemLayout-a53fff85.js";import{m as y,a as b,u as h,f as m}from"./index-961138f1.js";import"./index-84c40666.js";import{D as _,a as E,b as D,c as x}from"./TemplateNoData-b0444318.js";import{C as f,b as k,c as F,d as C,a as u}from"./card-2c105230.js";import{B as T}from"./button-8f2a595a.js";import{B as L}from"./badge-dbdf798f.js";/* empty css            *//* empty css              */import"./dialog-dd6b0ada.js";import"./index-61f18b0c.js";import"./drawer-134f179f.js";import"./theme-toggle-66897dc1.js";import"./ErrorMessage-9da431ff.js";import"./scroll-area-8438057d.js";import"./input-d9c06e18.js";import"./ApplicationLogoMask-c668ea73.js";import"./ApplicationLogo-c5ad270c.js";function X({auth:j,record:s,related:i}){const[g,d]=o.useState(!1);return o.useEffect(()=>{const a=()=>{setTimeout(()=>{d(!1)},100)};return document.addEventListener("dialog.record.shown",a),()=>{document.removeEventListener("dialog.record.shown",a)}}),o.useEffect(()=>{const a=t=>{var n,r;(n=t.detail)!=null&&n.action&&((r=t.detail)==null?void 0:r.action)==="delete"?c.visit(route("sys.record.index")):c.reload({only:["record","related"]})};return document.addEventListener("dialog.record.hidden",a),document.addEventListener("record.deleted-action",a),()=>{document.removeEventListener("dialog.record.hidden",a),document.removeEventListener("record.deleted-action",a)}}),e.jsx(e.Fragment,{children:e.jsxs(v,{user:j.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Record Detail"}),children:[e.jsx(w,{title:"Record Detail"}),e.jsx(N,{className:"px-0"}),e.jsxs(f,{className:" w-full",children:[e.jsx(k,{children:e.jsxs("div",{className:" relative flex flex-row justify-between items-start cursor-pointer",onClick:()=>{d(!0)},children:[e.jsxs("div",{children:[e.jsx(F,{children:e.jsx("div",{children:"Record: Detail"})}),e.jsx(C,{children:"See your detailed transaction"})]}),e.jsx("div",{children:e.jsxs(_,{open:g,onOpenChange:d,children:[e.jsx(E,{asChild:!0,children:e.jsx(T,{variant:"link",className:" p-0 h-auto leading-none dark:!text-white !text-black","data-type":"dropdown-trigger",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})})}),e.jsxs(D,{sideOffset:5,alignOffset:0,side:"left",align:"start",children:[e.jsx(x,{className:" cursor-pointer",onClick:()=>{c.reload({only:["data","related"]}),setTimeout(()=>{d(!1)},100)},children:e.jsx("span",{className:"",children:"Refresh"})}),(()=>document.getElementById("record-dialogSection")?e.jsx(x,{className:" cursor-pointer",onClick:t=>{let n=t.target;if(n){let r=n.innerHTML;n.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const p=()=>{r&&(n.innerHTML=r),document.removeEventListener("dialog.record.shown",p)};document.addEventListener("dialog.record.shown",p)}document.dispatchEvent(new CustomEvent("record.edit-action",{bubbles:!0,detail:{uuid:s==null?void 0:s.uuid}}))},children:e.jsx("span",{className:" text-yellow-500",children:"Edit"})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("record-deleteDialogSection")?e.jsx(x,{className:" cursor-pointer",onClick:()=>{document.dispatchEvent(new CustomEvent("record.delete-action",{bubbles:!0,detail:{uuid:s==null?void 0:s.uuid}}))},children:e.jsx("span",{className:" text-red-500",children:"Delete"})}):e.jsx(e.Fragment,{}))()]})]})})]})}),e.jsxs(u,{className:" flex flex-col gap-6",children:[e.jsxs("div",{className:" flex flex-row gap-2",children:[e.jsx("span",{children:e.jsx("i",{className:"fa-solid fa-clock"})}),e.jsx("span",{className:" font-medium",children:y("MMM Do, YYYY / HH:mm",s==null?void 0:s.datetime,b.tz.guess())})]}),(()=>s&&"planned_payment_record"in s&&s.planned_payment_record?e.jsx(e.Fragment,{children:e.jsxs("div",{className:" w-full p-4 rounded-lg border-2 border-dashed",children:[e.jsxs("span",{className:" flex items-center gap-2 text-sm font-normal",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),e.jsx("span",{className:"font-normal",children:"Part of Planned Payment"})]}),e.jsx("span",{className:" block mt-2",children:(()=>s.planned_payment_record&&s.planned_payment_record.planned_payment?e.jsx(e.Fragment,{children:e.jsxs("span",{children:["This record are part of ",e.jsx("u",{children:e.jsx(l,{href:route("sys.planned-payment.show",s.planned_payment_record.planned_payment.uuid),className:"text-primary",children:s.planned_payment_record.planned_payment.name})})," Planned Payment"]})}):e.jsx(e.Fragment,{}))()})]})}):s.is_hidden?e.jsx(e.Fragment,{children:e.jsxs("div",{className:" w-full p-4 rounded-lg border-2 border-dashed",children:[e.jsxs("span",{className:" flex items-center gap-2 text-sm font-normal",children:[e.jsx("i",{className:"fa-solid fa-triangle-exclamation"}),e.jsx("span",{className:"font-normal",children:"Hidden record"})]}),e.jsx("span",{className:" block mt-2",children:"Record is hidden, but affect your wallet balance"})]})}):e.jsx(e.Fragment,{}))(),e.jsxs("div",{className:" flex gap-4",children:[e.jsx("div",{className:" w-1/3",children:e.jsxs("div",{className:` border ${s.type==="income"?" border-green-500":"  border-red-500"} rounded-md h-full flex flex-col gap-2 justify-center items-center`,children:[e.jsx("div",{className:"",children:(()=>s.to_wallet?e.jsx("i",{className:` text-2xl fa-solid fa-arrow-right-arrow-left rotate-90 ${s.type==="income"?" text-green-500":"text-red-500"}`}):e.jsx("i",{className:`text-2xl fa-solid ${s.type==="income"?" text-green-500 fa-right-to-bracket rotate-90":" text-red-500 fa-right-from-bracket -rotate-90"}`}))()}),e.jsxs("div",{className:" flex flex-col justify-center",children:[e.jsx("span",{className:"font-normal text-center",children:s.to_wallet?"Transfer":h(s.type)}),(()=>s.to_wallet?e.jsxs("span",{className:" text-xs text-center",children:["(",h(s.type),")"]}):e.jsx(e.Fragment,{}))()]})]})}),e.jsxs("div",{className:" w-2/3",children:[e.jsxs("div",{className:"",children:[e.jsx("span",{className:"font-normal text-sm",children:"Category"}),e.jsx("span",{className:"block whitespace-nowrap overflow-hidden text-ellipsis",children:(()=>s.category?e.jsx(l,{href:route("sys.category.show",s.category.uuid),children:e.jsx("span",{children:e.jsx("u",{children:s.category.name})})}):"Uncategorized")()})]}),e.jsxs("div",{className:"",children:[e.jsx("span",{className:"font-normal text-sm",children:"From"}),e.jsx("span",{className:"block whitespace-nowrap overflow-hidden text-ellipsis",children:(()=>s.from_wallet?e.jsx(l,{href:route("sys.wallet.show",s.from_wallet.uuid),children:e.jsx("span",{children:e.jsx("u",{children:s.from_wallet.name})})}):"-")()})]}),(()=>s.to_wallet?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"",children:[e.jsx("span",{className:"font-normal text-sm",children:"To"}),e.jsx("span",{className:"block whitespace-nowrap overflow-hidden text-ellipsis",children:e.jsx("span",{className:"block whitespace-nowrap overflow-hidden text-ellipsis",children:(()=>s.to_wallet?e.jsx(l,{href:route("sys.wallet.show",s.to_wallet.uuid),children:e.jsx("span",{children:e.jsx("u",{children:s.to_wallet.name})})}):"-")()})})]})}):e.jsx(e.Fragment,{}))()]})]}),e.jsxs("div",{className:" w-full p-4 rounded-lg border-2 border-dashed",children:[e.jsxs("span",{className:" flex items-center gap-2 text-sm font-normal",children:[e.jsx("i",{className:"fa-solid fa-align-left"}),e.jsx("span",{className:"font-normal",children:"Note(s)"})]}),e.jsx("span",{className:" block mt-2",children:s.note??"No description provided"})]}),e.jsxs("div",{className:" flex flex-col",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Amount"}),e.jsx("span",{"data-review":"amount",children:m(s.amount??0)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[e.jsx("span",{children:"Extra"}),(()=>s.extra_type==="percentage"?e.jsxs("span",{className:"text-xs",children:["(",s.extra_percentage??0,"%)"]}):e.jsx(e.Fragment,{}))()]}),e.jsx("span",{"data-review":"extra_amount",children:m(s.extra_amount)})]}),e.jsx("hr",{className:"my-1"}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Final Amount"}),e.jsx("span",{className:"font-semibold","data-review":"final_amount",children:m(s.amount+s.extra_amount)})]})]}),(()=>{if(s.record_tags&&s.record_tags.length>0){let a=[];return s.record_tags.forEach((t,n)=>{a.push(e.jsx(l,{href:route("sys.tags.show",t.uuid),children:e.jsx(L,{children:t.name})},`tags_${t.uuid}`))}),e.jsxs("div",{className:" flex flex-row gap-2 flex-wrap",children:[e.jsxs("span",{className:" flex flex-row gap-1 items-center text-sm",children:[e.jsx("i",{className:" fa-solid fa-hashtag"}),e.jsx("span",{children:"Tags:"})]}),a]})}return e.jsx(e.Fragment,{})})()]})]}),(()=>i?e.jsx(e.Fragment,{children:e.jsx(l,{href:route("sys.record.show",i.uuid),children:e.jsx(f,{className:" mt-6 group",children:e.jsxs(u,{className:" flex flex-row gap-6 p-6 justify-between items-center",children:[e.jsxs("div",{className:" flex flex-col",children:[e.jsxs("span",{children:["Transfer ",s.type==="expense"?"to":"from"]}),e.jsx("span",{className:"block whitespace-nowrap overflow-hidden text-ellipsis text-2xl font-semibold",children:i.from_wallet?i.from_wallet.name:"-"})]}),e.jsx("div",{className:"",children:e.jsx("span",{className:" flex items-center justify-center w-10 h-10 border rounded-full p-4 group-hover:bg-primary transition-all",children:e.jsx("i",{className:"fa-solid fa-angle-right transition-all group-hover:text-white"})})})]})})})}):e.jsx(e.Fragment,{}))()]})})}export{X as default};
