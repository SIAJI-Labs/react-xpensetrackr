import{r,e as f,j as e,a as W,y as R}from"./app-459a09d3.js";import{u as z,B as x}from"./button-a63719e5.js";import{T as J}from"./TemplateBackButton-4ad351e8.js";import{D as K,a as Q,b as V,c as m,T as y}from"./TemplateNoData-c2d0fe86.js";import{T as X}from"./TemplateList-cc498deb.js";import{S as Y}from"./SystemLayout-30f844e7.js";import{T as Z,S as ee}from"./SkeletonList-40d25f9d.js";import{f as te}from"./function-f4ba249b.js";import{C as h,b as g,c as j,d as w,a as v,e as ne}from"./card-87928022.js";/* empty css            */import"./ApplicationLogo-d9d57bda.js";import"./textarea-4373452b.js";import"./ApplicationLogoMask-b8cbab48.js";import"./input-e82ac870.js";import"./badge-45543455.js";import"./skeleton-8cb07a76.js";function ve({auth:_,data:t}){const I=z(),[D,C]=r.useState(!1),[a,k]=r.useState([]);r.useEffect(()=>{console.log(t),k(t.wallet_group_item)},[t]),r.useEffect(()=>{const n=l=>{var o,s;(o=l.detail)!=null&&o.action&&((s=l.detail)==null?void 0:s.action)==="delete"?location.href=route("sys.wallet-group.index"):R.reload({only:["data"]})};return document.addEventListener("dialog.wallet.hidden",n),document.addEventListener("dialog.wallet-group.hidden",n),document.addEventListener("dialog.wallet.balance-adjustment.hidden",n),document.addEventListener("dialog.wallet-group.balance-adjustment.hidden",n),document.addEventListener("wallet-group.deleted-action",n),()=>{document.removeEventListener("dialog.wallet.hidden",n),document.removeEventListener("dialog.wallet-group.hidden",n),document.removeEventListener("dialog.wallet.balance-adjustment.hidden",n),document.removeEventListener("dialog.wallet-group.balance-adjustment.hidden",n),document.removeEventListener("wallet-group.deleted-action",n)}});const $=n=>e.jsx(Z,{record:n});let B=e.jsx(ee,{}),E=5;const[b,M]=r.useState(0),[L,F]=r.useState(0),[p,U]=r.useState(E),[A,N]=r.useState(!1);r.useEffect(()=>{u()},[p]);const[G,S]=r.useState(!0),[H,O]=r.useState(5),[c,P]=r.useState([]),[d,T]=r.useState(null);r.useEffect(()=>{O(c.length>0?c.length:3)},[c]);const u=async()=>{d instanceof AbortController&&d.abort();const n=new AbortController;T(n),S(!0);const l=[],o={limit:p};for(const s in o)l.push(encodeURIComponent(s)+"="+encodeURIComponent(o[s]));a&&(a==null?void 0:a.length)>0?a.forEach((s,i)=>{l.push(encodeURIComponent(`filter_from_wallet[${i}]`)+"="+encodeURIComponent(s.uuid)),l.push(encodeURIComponent(`filter_to_wallet[${i}]`)+"="+encodeURIComponent(s.uuid))}):(l.push(encodeURIComponent("filter_from_wallet[]")+"=-1"),l.push(encodeURIComponent("filter_to_wallet[]")+"=-1"));try{let i=(await f.get(`${route("api.record.v1.list")}?${l.join("&")}`,{cancelToken:new f.CancelToken(function(q){n.abort=q})})).data;P(i.result.data),N(i.result.has_more),M(i.result.data.length),"total"in i.result&&F(i.result.total),S(!1),T(null)}catch(s){f.isCancel(s)?console.log("Request was canceled",s):console.error("Error:",s)}};return r.useEffect(()=>{I||u()},[a]),r.useEffect(()=>{const n=()=>{setTimeout(()=>{u()},100)};return document.addEventListener("dialog.record.hidden",n),document.addEventListener("record.deleted-action",n),()=>{document.removeEventListener("dialog.record.hidden",n),document.removeEventListener("record.deleted-action",n)}}),e.jsx(e.Fragment,{children:e.jsxs(Y,{user:_.user,header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["Wallet Group Detail: ",`${t==null?void 0:t.name}`]}),children:[e.jsx(W,{title:`Wallet Group: ${t==null?void 0:t.name}`}),e.jsx("div",{className:"flex flex-col gap-6",children:e.jsx(J,{className:"px-0"})}),e.jsxs("div",{className:" flex flex-col gap-6",children:[e.jsxs(h,{className:" w-full",children:[e.jsx(g,{children:e.jsxs("div",{className:" relative flex flex-row justify-between items-start gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{children:e.jsxs("div",{children:["Wallet Group Detail: ",`${t==null?void 0:t.name}`]})}),e.jsxs(w,{children:["See summary of ",e.jsx("u",{children:`${t==null?void 0:t.name}`})," wallet group"]})]}),e.jsx("div",{children:e.jsxs(K,{open:D,onOpenChange:C,children:[e.jsx(Q,{asChild:!0,children:e.jsx(x,{variant:"link",className:" p-0 h-auto leading-none dark:!text-white !text-black","data-type":"dropdown-trigger",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})})}),e.jsxs(V,{sideOffset:5,alignOffset:0,side:"left",align:"start",children:[e.jsx(m,{className:" cursor-pointer",onClick:()=>{R.reload(),setTimeout(()=>{C(!1)},100)},children:e.jsx("span",{className:"",children:"Refresh"})}),(()=>document.getElementById("walletGroup-dialogSection")?e.jsx(m,{className:" cursor-pointer",onClick:l=>{let o=l.target;if(o){let s=o.innerHTML;o.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const i=()=>{s&&(o.innerHTML=s),document.removeEventListener("dialog.wallet.shown",i)};document.addEventListener("dialog.wallet.shown",i)}document.dispatchEvent(new CustomEvent("wallet-group.edit-action",{bubbles:!0,detail:{uuid:t&&"uuid"in t?t==null?void 0:t.uuid:""}}))},children:e.jsx("span",{className:" text-yellow-500",children:"Edit"})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("walletGroupBalanceAdjustment-dialogSection")?e.jsx(m,{className:" cursor-pointer",onClick:l=>{let o=l.target;if(o){let s=o.innerHTML;o.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const i=()=>{s&&(o.innerHTML=s),document.removeEventListener("dialog.wallet-group.balance-adjustment.shown",i)};document.addEventListener("dialog.wallet-group.balance-adjustment.shown",i)}document.dispatchEvent(new CustomEvent("wallet-group.balance-adjustment.edit-action",{bubbles:!0,detail:{uuid:t&&"uuid"in t?t==null?void 0:t.uuid:""}}))},children:e.jsx("span",{className:" text-yellow-500",children:"Balance Adjustment"})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("walletGroup-deleteDialogSection")?e.jsx(m,{className:" cursor-pointer",onClick:()=>{document.dispatchEvent(new CustomEvent("wallet-group.delete-action",{bubbles:!0,detail:{uuid:t&&"uuid"in t?t==null?void 0:t.uuid:null,action:"delete"}}))},children:e.jsx("span",{className:" text-red-500",children:"Delete"})}):e.jsx(e.Fragment,{}))()]})]})})]})}),e.jsx(v,{children:e.jsx("div",{className:" flex flex-col gap-4",children:e.jsx("div",{className:" flex flex-row justify-between",children:e.jsxs("div",{className:" flex flex-col",children:[e.jsx("span",{children:"Balance"}),e.jsx("span",{className:"font-semibold",children:te(t.balance??0)})]})})})})]}),e.jsxs(h,{className:" w-full",children:[e.jsx(g,{children:e.jsx("div",{className:" relative flex flex-row justify-between items-start",children:e.jsxs("div",{children:[e.jsx(j,{children:e.jsx("div",{children:"List of Item"})}),e.jsx(w,{children:"See the list of wallet group"})]})})}),e.jsx(v,{children:(()=>{var n;if("wallet_group_item"in t&&t.wallet_group_item&&((n=t.wallet_group_item)==null?void 0:n.length)>0){let l=[];if(t.wallet_group_item.forEach(o=>{l.push(e.jsx(X,{wallet:o},`group_item-${o.uuid}`))}),l.length>0)return e.jsx("div",{className:" flex flex-col gap-4",children:l})}return e.jsx(y,{})})()})]}),e.jsxs(h,{className:"",children:[e.jsx(g,{children:e.jsxs("div",{className:" flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(j,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(w,{children:"See your latest transaction"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(x,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{d instanceof AbortController&&d.abort(),u()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})})})]})}),e.jsx(v,{className:" flex flex-col gap-6",children:e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(G){let n=[];for(let l=0;l<H;l++)n.push(e.jsx("div",{children:B},`skeleton-${l}`));return n}else{let n=[],l=e.jsx(y,{});return c.length>0&&c.map((o,s)=>{n.push(e.jsx("div",{children:$(o)},`record_item-${s}`))}),n.length>0?n:l}})()})}),e.jsxs(ne,{className:"flex justify-between items-center",children:[e.jsx(x,{variant:"outline",className:"",disabled:!A,onClick:()=>{N(!1),U(p+E)},children:"Load more"}),(()=>b>0&&L>0?e.jsx(e.Fragment,{children:e.jsxs("span",{className:"text-sm",children:["Showing ",b," of ",L," entries"]})}):e.jsx(e.Fragment,{}))()]})]})]})]})})}export{ve as default};
