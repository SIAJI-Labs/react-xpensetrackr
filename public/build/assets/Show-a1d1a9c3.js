import{r,e as h,j as e,a as W,y as x}from"./app-49e19f09.js";import{u as z,B as g}from"./button-8f2a595a.js";import{S as J}from"./SystemLayout-a53fff85.js";import{T as K}from"./TemplateBackButton-a1494aed.js";import{D as Q,a as V,b as X,c as m,T as R}from"./TemplateNoData-b0444318.js";import{T as Y}from"./TemplateList-571b9c60.js";import{T as Z,S as ee}from"./SkeletonList-5b4d3cbf.js";import{f as te}from"./index-961138f1.js";import{C as j,b as w,c as v,d as E,a as L,e as ne}from"./card-2c105230.js";/* empty css            */import"./index-84c40666.js";import"./dialog-dd6b0ada.js";import"./index-61f18b0c.js";import"./drawer-134f179f.js";import"./theme-toggle-66897dc1.js";import"./ErrorMessage-9da431ff.js";import"./scroll-area-8438057d.js";import"./input-d9c06e18.js";import"./ApplicationLogoMask-c668ea73.js";import"./ApplicationLogo-c5ad270c.js";/* empty css              */import"./badge-dbdf798f.js";import"./skeleton-3b1a4842.js";function Te({auth:D,data:n}){const k=z(),[I,p]=r.useState(!1);r.useEffect(()=>{const t=()=>{setTimeout(()=>{p(!1)},100)};return document.addEventListener("dialog.wallet-group.shown",t),()=>{document.removeEventListener("dialog.wallet-group.shown",t)}});const[a,_]=r.useState([]);r.useEffect(()=>{_(n.wallet_group_item)},[n]),r.useEffect(()=>{const t=l=>{var s,o;console.log(l),(s=l.detail)!=null&&s.action&&l.type==="wallet-group.deleted-action"&&((o=l.detail)==null?void 0:o.action)==="delete"?x.visit(route("sys.wallet-group.index")):x.reload({only:["data"]})};return document.addEventListener("dialog.wallet.hidden",t),document.addEventListener("dialog.wallet.balance-adjustment.hidden",t),document.addEventListener("wallet.deleted-action",t),document.addEventListener("dialog.wallet-group.hidden",t),document.addEventListener("dialog.wallet-group.balance-adjustment.hidden",t),document.addEventListener("wallet-group.deleted-action",t),document.addEventListener("record.deleted-action",t),document.addEventListener("dialog.record.hidden",t),()=>{document.removeEventListener("dialog.wallet.hidden",t),document.removeEventListener("dialog.wallet.balance-adjustment.hidden",t),document.removeEventListener("wallet.deleted-action",t),document.removeEventListener("dialog.wallet-group.hidden",t),document.removeEventListener("dialog.wallet-group.balance-adjustment.hidden",t),document.removeEventListener("wallet-group.deleted-action",t),document.removeEventListener("record.deleted-action",t),document.removeEventListener("dialog.record.hidden",t)}});const $=t=>e.jsx(Z,{record:t});let B=e.jsx(ee,{}),C=5;const[b,M]=r.useState(0),[S,F]=r.useState(0),[f,A]=r.useState(C),[G,N]=r.useState(!1);r.useEffect(()=>{u()},[f]);const[H,T]=r.useState(!0),[O,U]=r.useState(5),[c,P]=r.useState([]),[d,y]=r.useState(null);r.useEffect(()=>{U(c.length>0?c.length:3)},[c]);const u=async()=>{d instanceof AbortController&&d.abort();const t=new AbortController;y(t),T(!0);const l=[],s={limit:f};for(const o in s)l.push(encodeURIComponent(o)+"="+encodeURIComponent(s[o]));a&&(a==null?void 0:a.length)>0?a.forEach((o,i)=>{l.push(encodeURIComponent(`filter_wallet[${i}]`)+"="+encodeURIComponent(o.uuid))}):l.push(encodeURIComponent("filter_wallet[]")+"=-1");try{let i=(await h.get(`${route("api.record.v1.list")}?${l.join("&")}`,{cancelToken:new h.CancelToken(function(q){t.abort=q})})).data;P(i.result.data),N(i.result.has_more),M(i.result.data.length),"total"in i.result&&F(i.result.total),T(!1),y(null)}catch(o){h.isCancel(o)?console.log("Request was canceled",o):console.error("Error:",o)}};return r.useEffect(()=>{k||u()},[a]),r.useEffect(()=>{const t=()=>{setTimeout(()=>{u()},100)};return document.addEventListener("dialog.record.hidden",t),document.addEventListener("record.deleted-action",t),()=>{document.removeEventListener("dialog.record.hidden",t),document.removeEventListener("record.deleted-action",t)}}),e.jsx(e.Fragment,{children:e.jsxs(J,{user:D.user,header:e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:["Wallet Group Detail: ",`${n==null?void 0:n.name}`]}),children:[e.jsx(W,{title:`Wallet Group: ${n==null?void 0:n.name}`}),e.jsx(K,{className:"px-0"}),e.jsxs("div",{className:" flex flex-col gap-6",children:[e.jsxs(j,{className:" w-full",children:[e.jsx(w,{children:e.jsxs("div",{className:" relative flex flex-row justify-between items-start gap-4",children:[e.jsxs("div",{children:[e.jsx(v,{children:e.jsxs("div",{children:["Wallet Group Detail: ",`${n==null?void 0:n.name}`]})}),e.jsxs(E,{children:["See summary of ",e.jsx("u",{children:`${n==null?void 0:n.name}`})," wallet group"]})]}),e.jsx("div",{children:e.jsxs(Q,{open:I,onOpenChange:p,children:[e.jsx(V,{asChild:!0,children:e.jsx(g,{variant:"link",className:" p-0 h-auto leading-none dark:!text-white !text-black","data-type":"dropdown-trigger",children:e.jsx("i",{className:"fa-solid fa-ellipsis-vertical"})})}),e.jsxs(X,{sideOffset:5,alignOffset:0,side:"left",align:"start",children:[e.jsx(m,{className:" cursor-pointer",onClick:()=>{x.reload(),setTimeout(()=>{p(!1)},100)},children:e.jsx("span",{className:"",children:"Refresh"})}),(()=>document.getElementById("walletGroup-dialogSection")?e.jsx(m,{className:" cursor-pointer",onClick:l=>{let s=l.target;if(s){let o=s.innerHTML;s.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const i=()=>{o&&(s.innerHTML=o),document.removeEventListener("dialog.wallet.shown",i)};document.addEventListener("dialog.wallet.shown",i)}document.dispatchEvent(new CustomEvent("wallet-group.edit-action",{bubbles:!0,detail:{uuid:n&&"uuid"in n?n==null?void 0:n.uuid:""}}))},children:e.jsx("span",{className:" text-yellow-500",children:"Edit"})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("walletGroupBalanceAdjustment-dialogSection")?e.jsx(m,{className:" cursor-pointer",onClick:l=>{let s=l.target;if(s){let o=s.innerHTML;s.innerHTML='<span class=" flex items-center gap-1"><i class="fa-solid fa-spinner fa-spin-pulse"></i>Loading</span>';const i=()=>{o&&(s.innerHTML=o),document.removeEventListener("dialog.wallet-group.balance-adjustment.shown",i)};document.addEventListener("dialog.wallet-group.balance-adjustment.shown",i)}document.dispatchEvent(new CustomEvent("wallet-group.balance-adjustment.edit-action",{bubbles:!0,detail:{uuid:n&&"uuid"in n?n==null?void 0:n.uuid:""}}))},children:e.jsx("span",{className:" text-yellow-500",children:"Balance Adjustment"})}):e.jsx(e.Fragment,{}))(),(()=>document.getElementById("walletGroup-deleteDialogSection")?e.jsx(m,{className:" cursor-pointer",onClick:()=>{document.dispatchEvent(new CustomEvent("wallet-group.delete-action",{bubbles:!0,detail:{uuid:n&&"uuid"in n?n==null?void 0:n.uuid:null,action:"delete"}}))},children:e.jsx("span",{className:" text-red-500",children:"Delete"})}):e.jsx(e.Fragment,{}))()]})]})})]})}),e.jsx(L,{children:e.jsx("div",{className:" flex flex-col gap-4",children:e.jsx("div",{className:" flex flex-row justify-between",children:e.jsxs("div",{className:" flex flex-col",children:[e.jsx("span",{children:"Balance"}),e.jsx("span",{className:"font-semibold",children:te(n.balance??0)})]})})})})]}),e.jsxs(j,{className:" w-full",children:[e.jsx(w,{children:e.jsx("div",{className:" relative flex flex-row justify-between items-start",children:e.jsxs("div",{children:[e.jsx(v,{children:e.jsx("div",{children:"List of Item"})}),e.jsx(E,{children:"See the list of wallet group"})]})})}),e.jsx(L,{children:(()=>{var t;if("wallet_group_item"in n&&n.wallet_group_item&&((t=n.wallet_group_item)==null?void 0:t.length)>0){let l=[];if(n.wallet_group_item.forEach(s=>{l.push(e.jsx(Y,{wallet:s},`group_item-${s.uuid}`))}),l.length>0)return e.jsx("div",{className:" flex flex-col gap-4",children:l})}return e.jsx(R,{})})()})]}),e.jsxs(j,{className:"",children:[e.jsx(w,{children:e.jsxs("div",{className:" flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(v,{children:e.jsx("div",{children:"Record: List"})}),e.jsx(E,{children:"See your latest transaction"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(g,{variant:"outline",className:" w-10 aspect-square",onClick:()=>{d instanceof AbortController&&d.abort(),u()},children:e.jsx("i",{className:"fa-solid fa-rotate-right"})})})]})}),e.jsx(L,{className:" flex flex-col gap-6",children:e.jsx("div",{className:" flex flex-col gap-4",children:(()=>{if(H){let t=[];for(let l=0;l<O;l++)t.push(e.jsx("div",{children:B},`skeleton-${l}`));return t}else{let t=[],l=e.jsx(R,{});return c.length>0&&c.map((s,o)=>{t.push(e.jsx("div",{children:$(s)},`record_item-${o}`))}),t.length>0?t:l}})()})}),e.jsxs(ne,{className:"flex justify-between items-center",children:[e.jsx(g,{variant:"outline",className:"",disabled:!G,onClick:()=>{N(!1),A(f+C)},children:"Load more"}),(()=>b>0&&S>0?e.jsx(e.Fragment,{children:e.jsxs("span",{className:"text-sm",children:["Showing ",b," of ",S," entries"]})}):e.jsx(e.Fragment,{}))()]})]})]})]})})}export{Te as default};
